var Rn=Object.defineProperty;var o=(e,t)=>Rn(e,"name",{value:t,configurable:!0});import Xt,{useEffect as Xi,useState as Yi}from"react";import{useQuery as Yo}from"@tanstack/react-query";import{getXRay as Jo}from"@refinedev/devtools-internal";import zr from"qs";import _o from"lodash-es/unionWith";import Oo from"lodash-es/differenceWith";import Sn from"warn-once";var Vt=o(e=>e/1e3,"userFriendlySecond");import Pn from"lodash-es/zip";import xn from"lodash-es/fromPairs";var er=o((e,t=r=>r)=>{let[r,...s]=e;return s.map(n=>xn(Pn(r,n))).map((n,i,a)=>t.call(void 0,n,i,a))},"importCSVMapper");import Co from"pluralize";var tr=o((e="",t)=>{let r=Bt(e);return t==="singular"?Co.singular(r):Co.plural(r)},"userFriendlyResourceName");var bo=o((e={})=>e!=null&&e.id?{...e,id:decodeURIComponent(e.id)}:e,"handleUseParams");var S=o((...e)=>e.find(t=>typeof t<"u"),"pickNotDeprecated");function Ye(e,t){return e.findIndex((r,s)=>s<=e.length-t.length&&t.every((n,i)=>e[s+i]===n))}o(Ye,"arrayFindIndex");function hn(e){if(e[0]==="data"){let t=e.slice(1);if(t[2]==="many")t[2]="getMany";else if(t[2]==="infinite")t[2]="list";else if(t[2]==="one")t[2]="detail";else if(t[1]==="custom"){let r={...t[2]};return delete r.method,delete r.url,[t[0],t[1],t[2].method,t[2].url,r]}return t}if(e[0]==="audit"&&e[2]==="list")return["logList",e[1],e[3]];if(e[0]==="access"&&e.length===4)return["useCan",{resource:e[1],action:e[2],...e[3]}];if(e[0]==="auth"){if(Ye(e,["auth","login"])!==-1)return["useLogin"];if(Ye(e,["auth","logout"])!==-1)return["useLogout"];if(Ye(e,["auth","identity"])!==-1)return["getUserIdentity"];if(Ye(e,["auth","register"])!==-1)return["useRegister"];if(Ye(e,["auth","forgotPassword"])!==-1)return["useForgotPassword"];if(Ye(e,["auth","check"])!==-1)return["useAuthenticated",e[2]];if(Ye(e,["auth","onError"])!==-1)return["useCheckError"];if(Ye(e,["auth","permissions"])!==-1)return["usePermissions"];if(Ye(e,["auth","updatePassword"])!==-1)return["useUpdatePassword"]}return e}o(hn,"convertToLegacy");var Le=class{constructor(t=[]){this.segments=[];this.segments=t}key(){return this.segments}legacy(){return hn(this.segments)}get(t){return t?this.legacy():this.segments}};o(Le,"BaseKeyBuilder");var $e=class extends Le{constructor(t){super(t)}params(t){return new Le([...this.segments,t])}};o($e,"ParamsKeyBuilder");var rr=class extends Le{constructor(t){super(t)}id(t){return new $e([...this.segments,t?String(t):void 0])}};o(rr,"DataIdRequiringKeyBuilder");var or=class extends Le{constructor(t){super(t)}ids(...t){return new $e([...this.segments,...t.length?[t.map(r=>String(r))]:[]])}};o(or,"DataIdsRequiringKeyBuilder");var sr=class extends Le{constructor(t){super(t)}action(t){if(t==="one")return new rr([...this.segments,t]);if(t==="many")return new or([...this.segments,t]);if(["list","infinite"].includes(t))return new $e([...this.segments,t]);throw new Error("Invalid action type")}};o(sr,"DataResourceKeyBuilder");var nr=class extends Le{constructor(t){super(t)}resource(t){return new sr([...this.segments,t])}mutation(t){return new $e([...t==="custom"?this.segments:[this.segments[0]],t])}};o(nr,"DataKeyBuilder");var ar=class extends Le{constructor(t){super(t)}action(t){return new $e([...this.segments,t])}};o(ar,"AuthKeyBuilder");var ir=class extends Le{constructor(t){super(t)}action(t){return new $e([...this.segments,t])}};o(ir,"AccessResourceKeyBuilder");var ur=class extends Le{constructor(t){super(t)}resource(t){return new ir([...this.segments,t])}};o(ur,"AccessKeyBuilder");var cr=class extends Le{constructor(t){super(t)}action(t){return new $e([...this.segments,t])}};o(cr,"AuditActionKeyBuilder");var dr=class extends Le{constructor(t){super(t)}resource(t){return new cr([...this.segments,t])}action(t){return new $e([...this.segments,t])}};o(dr,"AuditKeyBuilder");var Ct=class extends Le{constructor(t){super(t)}data(t){return new nr(["data",t||"default"])}auth(){return new ar(["auth"])}access(){return new ur(["access"])}audit(){return new dr(["audit"])}};o(Ct,"KeyBuilder");var We=o(()=>new Ct([]),"keys");var vo=o((e,t,r,s)=>{let n=t||"default",i={all:[n],resourceAll:[n,e||""],list:a=>[...i.resourceAll,"list",{...a,...S(r,s)||{}}],many:a=>[...i.resourceAll,"getMany",a&&a.map(String),{...S(r,s)||{}}].filter(u=>u!==void 0),detail:a=>[...i.resourceAll,"detail",a==null?void 0:a.toString(),{...S(r,s)||{}}],logList:a=>["logList",e,a,s].filter(u=>u!==void 0)};return i},"queryKeys"),Je=o(e=>(t,r,s,n)=>{let i=r||"default";return{all:We().data(i).get(e),resourceAll:We().data(r).resource(t??"").get(e),list:u=>We().data(r).resource(t??"").action("list").params({...u,...S(s,n)||{}}).get(e),many:u=>We().data(r).resource(t??"").action("many").ids(...u??[]).params({...S(s,n)||{}}).get(e),detail:u=>We().data(r).resource(t??"").action("one").id(u??"").params({...S(s,n)||{}}).get(e),logList:u=>[...We().audit().resource(t).action("list").params(u).get(e),n].filter(d=>d!==void 0)}},"queryKeysReplacement");var Br=o((e,t)=>!e||!t?!1:!!e.find(r=>r===t),"hasPermission");var bt=o(e=>e.startsWith(":"),"isParameter");var je=o(e=>e.split("/").filter(r=>r!==""),"splitToSegments");var Do=o((e,t)=>{let r=je(e),s=je(t);return r.length===s.length},"isSegmentCountsSame");var xe=o(e=>e.replace(/^\/|\/$/g,""),"removeLeadingTrailingSlashes");var Lo=o((e,t)=>{let r=xe(e),s=xe(t);if(!Do(r,s))return!1;let n=je(r);return je(s).every((a,u)=>bt(a)||a===n[u])},"checkBySegments");var Eo=o((e,t,r)=>{let s=xe(r||""),n=`${s}${s?"/":""}${e}`;return t==="list"?n=`${n}`:t==="create"?n=`${n}/create`:t==="edit"?n=`${n}/edit/:id`:t==="show"?n=`${n}/show/:id`:t==="clone"&&(n=`${n}/clone/:id`),`/${n.replace(/^\//,"")}`},"getDefaultActionPath");var Ae=o((e,t)=>{var n,i;let r=S((n=e.meta)==null?void 0:n.parent,(i=e.options)==null?void 0:i.parent,e.parentName);return r?t.find(a=>(a.identifier??a.name)===r)??{name:r}:void 0},"getParentResource");var Nt=o((e,t,r)=>{let s=[],n=Ae(e,t);for(;n;)s.push(n),n=Ae(n,t);if(s.length!==0)return`/${s.reverse().map(i=>{var u;let a=r?((u=i.options)==null?void 0:u.route)??i.name:i.name;return xe(a)}).join("/")}`},"getParentPrefixForResource");var Pe=o((e,t,r)=>{let s=[],n=["list","show","edit","create","clone"],i=Nt(e,t,r);return n.forEach(a=>{var c,p;let u=r&&a==="clone"?e.create:e[a],d;typeof u=="function"||r?d=Eo(r?((c=e.meta)==null?void 0:c.route)??((p=e.options)==null?void 0:p.route)??e.name:e.name,a,r?i:void 0):typeof u=="string"?d=u:typeof u=="object"&&(d=u.path),d&&s.push({action:a,resource:e,route:`/${d.replace(/^\//,"")}`})}),s},"getActionRoutesFromResource");var Uo=o(e=>{var n;if(e.length===0)return;if(e.length===1)return e[0];let t=e.map(i=>({...i,splitted:je(xe(i.route))})),r=((n=t[0])==null?void 0:n.splitted.length)??0,s=[...t];for(let i=0;i<r;i++){let a=s.filter(u=>!bt(u.splitted[i]));if(a.length!==0){if(a.length===1){s=a;break}s=a}}return s[0]},"pickMatchedRoute");var Mo=o((e,t)=>{let s=t.flatMap(i=>Pe(i,t)).filter(i=>Lo(e,i.route)),n=Uo(s);return{found:!!n,resource:n==null?void 0:n.resource,action:n==null?void 0:n.action,matchedRoute:n==null?void 0:n.route}},"matchResourceFromRoute");var pr=o((e,t)=>{var n;let r,s=Nt(e,t,!0);if(s){let i=S(e.meta,e.options);r=`${s}/${(i==null?void 0:i.route)??e.name}`}else r=((n=e.options)==null?void 0:n.route)??e.name;return`/${r.replace(/^\//,"")}`},"routeGenerator");var Io=o(e=>{var a;let t=[],r={},s={},n,i;for(let u=0;u<e.length;u++){n=e[u];let d=n.route??((a=S(n==null?void 0:n.meta,n.options))==null?void 0:a.route)??"";r[d]=n,r[d].children=[],s[n.name]=n,s[n.name].children=[]}for(let u in r)r.hasOwnProperty(u)&&(i=r[u],i.parentName&&s[i.parentName]?s[i.parentName].children.push(i):t.push(i));return t},"createTreeView");var Bt=o(e=>(e=e.replace(/([a-z]{1})([A-Z]{1})/g,"$1-$2"),e=e.replace(/([A-Z]{1})([A-Z]{1})([a-z]{1})/g,"$1-$2$3"),e=e.toLowerCase().replace(/[_-]+/g," ").replace(/\s{2,}/g," ").trim(),e=e.charAt(0).toUpperCase()+e.slice(1),e),"humanizeString");import So from"react";import wo from"pluralize";import Cn from"react";var Nr=o(({children:e})=>Cn.createElement("div",null,e),"DefaultLayout");var Ee={mutationMode:"pessimistic",syncWithLocation:!1,undoableTimeout:5e3,warnWhenUnsavedChanges:!1,liveMode:"off",redirect:{afterCreate:"list",afterClone:"list",afterEdit:"list"},overtime:{interval:1e3},textTransformers:{humanize:Bt,plural:wo.plural,singular:wo.singular},disableServerSideValidation:!1},Ue=So.createContext({hasDashboard:!1,mutationMode:"pessimistic",warnWhenUnsavedChanges:!1,syncWithLocation:!1,undoableTimeout:5e3,Title:void 0,Sider:void 0,Header:void 0,Footer:void 0,Layout:Nr,OffLayoutArea:void 0,liveMode:"off",onLiveEvent:void 0,options:Ee}),Ao=o(({hasDashboard:e,mutationMode:t,warnWhenUnsavedChanges:r,syncWithLocation:s,undoableTimeout:n,children:i,DashboardPage:a,Title:u,Layout:d=Nr,Header:c,Sider:p,Footer:m,OffLayoutArea:R,LoginPage:g=Kr,catchAll:T,liveMode:E="off",onLiveEvent:D,options:f})=>So.createElement(Ue.Provider,{value:{hasDashboard:e,mutationMode:t,warnWhenUnsavedChanges:r,syncWithLocation:s,Title:u,undoableTimeout:n,Layout:d,Header:c,Sider:p,Footer:m,OffLayoutArea:R,DashboardPage:a,LoginPage:g,catchAll:T,liveMode:E,onLiveEvent:D,options:f}},i),"RefineContextProvider");var Hr=o(({options:e,disableTelemetry:t,liveMode:r,mutationMode:s,reactQueryClientConfig:n,reactQueryDevtoolConfig:i,syncWithLocation:a,undoableTimeout:u,warnWhenUnsavedChanges:d}={})=>{var R,g,T,E,D,f,h,L;let c={breadcrumb:e==null?void 0:e.breadcrumb,mutationMode:(e==null?void 0:e.mutationMode)??s??Ee.mutationMode,undoableTimeout:(e==null?void 0:e.undoableTimeout)??u??Ee.undoableTimeout,syncWithLocation:(e==null?void 0:e.syncWithLocation)??a??Ee.syncWithLocation,warnWhenUnsavedChanges:(e==null?void 0:e.warnWhenUnsavedChanges)??d??Ee.warnWhenUnsavedChanges,liveMode:(e==null?void 0:e.liveMode)??r??Ee.liveMode,redirect:{afterCreate:((R=e==null?void 0:e.redirect)==null?void 0:R.afterCreate)??Ee.redirect.afterCreate,afterClone:((g=e==null?void 0:e.redirect)==null?void 0:g.afterClone)??Ee.redirect.afterClone,afterEdit:((T=e==null?void 0:e.redirect)==null?void 0:T.afterEdit)??Ee.redirect.afterEdit},overtime:(e==null?void 0:e.overtime)??Ee.overtime,textTransformers:{humanize:((E=e==null?void 0:e.textTransformers)==null?void 0:E.humanize)??Ee.textTransformers.humanize,plural:((D=e==null?void 0:e.textTransformers)==null?void 0:D.plural)??Ee.textTransformers.plural,singular:((f=e==null?void 0:e.textTransformers)==null?void 0:f.singular)??Ee.textTransformers.singular},disableServerSideValidation:(e==null?void 0:e.disableServerSideValidation)??Ee.disableServerSideValidation,projectId:e==null?void 0:e.projectId,useNewQueryKeys:e==null?void 0:e.useNewQueryKeys},p=(e==null?void 0:e.disableTelemetry)??t??!1,m={clientConfig:((h=e==null?void 0:e.reactQuery)==null?void 0:h.clientConfig)??n??{},devtoolConfig:((L=e==null?void 0:e.reactQuery)==null?void 0:L.devtoolConfig)??i??{}};return{optionsWithDefaults:c,disableTelemetryWithDefault:p,reactQueryWithDefaults:m}},"handleRefineOptions");var Gr=o(({redirectFromProps:e,action:t,redirectOptions:r})=>{if(e||e===!1)return e;switch(t){case"clone":return r.afterClone;case"create":return r.afterCreate;case"edit":return r.afterEdit;default:return!1}},"redirectPage");var lr=o(async(e,t,r)=>{let s=[];for(let[n,i]of e.entries())try{let a=await i();s.push(t(a,n))}catch(a){s.push(r(a,n))}return s},"sequentialPromises");var de=o((e,t=[],r=!1)=>{if(!e)return;if(r){let n=t.find(a=>xe(a.route??"")===xe(e));return n||t.find(a=>a.name===e)}let s=t.find(n=>n.identifier===e);return s||(s=t.find(n=>n.name===e)),s},"pickResource");var z=o((e,t,r)=>{if(t)return t;let s=de(e,r),n=S(s==null?void 0:s.meta,s==null?void 0:s.options);return n!=null&&n.dataProviderName?n.dataProviderName:"default"},"pickDataProvider");var Ze=o(async e=>({data:(await Promise.all(e)).map(t=>t.data)}),"handleMultiple");var mr=o(e=>{let{pagination:t,cursor:r}=e;if(r!=null&&r.next)return r.next;let s=(t==null?void 0:t.current)||1,n=(t==null?void 0:t.pageSize)||10,i=Math.ceil((e.total||0)/n);return s<i?Number(s)+1:void 0},"getNextPageParam"),fr=o(e=>{let{pagination:t,cursor:r}=e;if(r!=null&&r.prev)return r.prev;let s=(t==null?void 0:t.current)||1;return s===1?void 0:s-1},"getPreviousPageParam");var yr=o(e=>{let t=[];return e.forEach(r=>{var s,n;t.push({...r,label:((s=r.meta)==null?void 0:s.label)??((n=r.options)==null?void 0:n.label),route:pr(r,e),canCreate:!!r.create,canEdit:!!r.edit,canShow:!!r.show,canDelete:r.canDelete})}),t},"legacyResourceTransform");var ko=o(e=>je(xe(e)).flatMap(r=>bt(r)?[r.slice(1)]:[]),"pickRouteParams");var Fo=o((e,t={})=>e.reduce((r,s)=>{let n=t[s];return typeof n<"u"&&(r[s]=n),r},{}),"prepareRouteParams");var Me=o((e,t={},r={},s={})=>{let n=ko(e),i=Fo(n,{...t,...typeof(r==null?void 0:r.id)<"u"?{id:r.id}:{},...typeof(r==null?void 0:r.action)<"u"?{action:r.action}:{},...typeof(r==null?void 0:r.resource)<"u"?{resource:r.resource}:{},...r==null?void 0:r.params,...s});return e.replace(/:([^\/]+)/g,(a,u)=>{let d=i[u];return typeof d<"u"?`${d}`:a})},"composeRoute");import vt from"react";var Qo=vt.createContext({}),Vo=o(({children:e,isProvided:t,...r})=>{let{replace:s}=le(),n=o(async d=>{var c;try{return await((c=r.login)==null?void 0:c.call(r,d))}catch(p){return Promise.reject(p)}},"loginFunc"),i=o(async d=>{var c;try{return await((c=r.register)==null?void 0:c.call(r,d))}catch(p){return Promise.reject(p)}},"registerFunc"),a=o(async d=>{var c;try{return await((c=r.logout)==null?void 0:c.call(r,d))}catch(p){return Promise.reject(p)}},"logoutFunc"),u=o(async d=>{var c;try{return await((c=r.checkAuth)==null?void 0:c.call(r,d)),Promise.resolve()}catch(p){return p!=null&&p.redirectPath&&s(p.redirectPath),Promise.reject(p)}},"checkAuthFunc");return vt.createElement(Qo.Provider,{value:{...r,login:n,logout:a,checkAuth:u,register:i,isProvided:t}},e)},"LegacyAuthContextProvider"),Bo=vt.createContext({}),No=o(({children:e,isProvided:t,...r})=>{let s=o(async c=>{var p;try{return await((p=r.login)==null?void 0:p.call(r,c))}catch(m){return console.warn("Unhandled Error in login: refine always expects a resolved promise.",m),Promise.reject(m)}},"handleLogin"),n=o(async c=>{var p;try{return await((p=r.register)==null?void 0:p.call(r,c))}catch(m){return console.warn("Unhandled Error in register: refine always expects a resolved promise.",m),Promise.reject(m)}},"handleRegister"),i=o(async c=>{var p;try{return await((p=r.logout)==null?void 0:p.call(r,c))}catch(m){return console.warn("Unhandled Error in logout: refine always expects a resolved promise.",m),Promise.reject(m)}},"handleLogout"),a=o(async c=>{var p;try{let m=await((p=r.check)==null?void 0:p.call(r,c));return Promise.resolve(m)}catch(m){return console.warn("Unhandled Error in check: refine always expects a resolved promise.",m),Promise.reject(m)}},"handleCheck"),u=o(async c=>{var p;try{let m=await((p=r.forgotPassword)==null?void 0:p.call(r,c));return Promise.resolve(m)}catch(m){return console.warn("Unhandled Error in forgotPassword: refine always expects a resolved promise.",m),Promise.reject(m)}},"handleForgotPassword"),d=o(async c=>{var p;try{let m=await((p=r.updatePassword)==null?void 0:p.call(r,c));return Promise.resolve(m)}catch(m){return console.warn("Unhandled Error in updatePassword: refine always expects a resolved promise.",m),Promise.reject(m)}},"handleUpdatePassword");return vt.createElement(Bo.Provider,{value:{...r,login:s,logout:i,check:a,register:n,forgotPassword:u,updatePassword:d,isProvided:t}},e)},"AuthBindingsContextProvider"),se=o(()=>vt.useContext(Qo),"useLegacyAuthContext"),pe=o(()=>vt.useContext(Bo),"useAuthBindingsContext");var Y=o(()=>{let e=se(),t=pe();return t.isProvided?{isLegacy:!1,...t}:e.isProvided?{isLegacy:!0,...e,check:e.checkAuth,onError:e.checkError,getIdentity:e.getUserIdentity}:null},"useActiveAuthProvider");var Kt=o(({hasPagination:e,pagination:t,configPagination:r}={})=>{let s=e===!1?"off":"server",n=(t==null?void 0:t.mode)??s,i=S(t==null?void 0:t.current,r==null?void 0:r.current)??1,a=S(t==null?void 0:t.pageSize,r==null?void 0:r.pageSize)??10;return{current:i,pageSize:a,mode:n}},"handlePaginationParams");import{useState as bn,useEffect as vn}from"react";var gr=o(e=>{let[t,r]=bn(!1);return vn(()=>{let s=window.matchMedia(e);s.matches!==t&&r(s.matches);let n=o(()=>r(s.matches),"listener");return window.addEventListener("resize",n),()=>window.removeEventListener("resize",n)},[t,e]),t},"useMediaQuery");var Tr=o((e,t,r,s)=>{let n=s?e(t,s,r):e(t,r),i=r??t;return n===t||typeof n>"u"?i:n},"safeTranslate");function Ko(e,t,r,s,n){var R;let i={create:"Create new ",clone:`#${s??""} Clone `,edit:`#${s??""} Edit `,show:`#${s??""} Show `,list:""},a=(t==null?void 0:t.identifier)??(t==null?void 0:t.name),u=(t==null?void 0:t.label)??((R=t==null?void 0:t.meta)==null?void 0:R.label)??tr(a,r==="list"?"plural":"singular"),d=n??u,c=Tr(e,"documentTitle.default","refine"),p=Tr(e,"documentTitle.suffix"," | refine"),m=c;return r&&a&&(m=Tr(e,`documentTitle.${a}.${r}`,`${i[r]??""}${d}${p}`,{id:s})),m}o(Ko,"generateDefaultDocumentTitle");import{useContext as Dn}from"react";var ze=o(()=>{let{mutationMode:e,undoableTimeout:t}=Dn(Ue);return{mutationMode:e,undoableTimeout:t}},"useMutationMode");import{useContext as $o}from"react";import Ho,{useState as Ln}from"react";var $r=Ho.createContext({}),Go=o(({children:e})=>{let[t,r]=Ln(!1);return Ho.createElement($r.Provider,{value:{warnWhen:t,setWarnWhen:r}},e)},"UnsavedWarnContextProvider");var Ht=o(()=>{let{warnWhenUnsavedChanges:e}=$o(Ue),{warnWhen:t,setWarnWhen:r}=$o($r);return{warnWhenUnsavedChanges:e,warnWhen:!!t,setWarnWhen:r??(()=>{})}},"useWarnAboutChange");import{useContext as En}from"react";var Wr=o(()=>{let{syncWithLocation:e}=En(Ue);return{syncWithLocation:e}},"useSyncWithLocation");import{useContext as Un}from"react";var Mn=o(()=>{let{Title:e}=Un(Ue);return e},"useTitle");import{useContext as In}from"react";var oe=o(()=>{let{Footer:e,Header:t,Layout:r,OffLayoutArea:s,Sider:n,Title:i,hasDashboard:a,mutationMode:u,syncWithLocation:d,undoableTimeout:c,warnWhenUnsavedChanges:p,DashboardPage:m,LoginPage:R,catchAll:g,options:T}=In(Ue);return{Footer:e,Header:t,Layout:r,OffLayoutArea:s,Sider:n,Title:i,hasDashboard:a,mutationMode:u,syncWithLocation:d,undoableTimeout:c,warnWhenUnsavedChanges:p,DashboardPage:m,LoginPage:R,catchAll:g,options:T}},"useRefineContext");var Dt=o(()=>{let{options:{textTransformers:e}}=oe();return o((r="",s)=>{let n=e.humanize(r);return s==="singular"?e.singular(n):e.plural(n)},"getFriendlyName")},"useUserFriendlyName");var Wo=o(e=>typeof e=="object"&&e!==null,"isNested"),wn=o(e=>Array.isArray(e),"isArray"),Rr=o((e,t="")=>Wo(e)?Object.keys(e).reduce((r,s)=>{let n=t.length?t+".":"";return Wo(e[s])&&Object.keys(e[s]).length&&(wn(e[s])&&e[s].length?e[s].forEach((i,a)=>{Object.assign(r,Rr(i,n+s+"."+a))}):Object.assign(r,Rr(e[s],n+s))),r[n+s]=e[s],r},{}):{[t]:e},"flattenObjectKeys");var zo=o(e=>e.split(".").map(t=>isNaN(Number(t))?t:Number(t)),"propertyPathToArray");var Pr=o(e=>{let{current:t,pageSize:r,sorter:s,sorters:n,filters:i}=zr.parse(e.substring(1));return{parsedCurrent:t&&Number(t),parsedPageSize:r&&Number(r),parsedSorter:S(n,s)??[],parsedFilters:i??[]}},"parseTableParams"),An=o(e=>{let t=zr.stringify(e);return Pr(`/${t}`)},"parseTableParamsFromQuery"),xr=o(e=>{let t={skipNulls:!0,arrayFormat:"indices",encode:!1},{pagination:r,sorter:s,sorters:n,filters:i,...a}=e;return zr.stringify({...a,...r||{},sorters:S(n,s),filters:i},t)},"stringifyTableParams"),jo=o((e,t)=>e.operator!=="and"&&e.operator!=="or"&&t.operator!=="and"&&t.operator!=="or"?("field"in e?e.field:void 0)==("field"in t?t.field:void 0)&&e.operator==t.operator:("key"in e?e.key:void 0)==("key"in t?t.key:void 0)&&e.operator==t.operator,"compareFilters"),Xo=o((e,t)=>e.field==t.field,"compareSorters"),Lt=o((e,t,r=[])=>(t.filter(n=>(n.operator==="or"||n.operator==="and")&&!n.key).length>1&&Sn(!0,`[conditionalFilters]: You have created multiple Conditional Filters at the top level, this requires the key parameter. 
For more information, see https://refine.dev/docs/advanced-tutorials/data-provider/handling-filters/#top-level-multiple-conditional-filters-usage`),_o(e,t,r,jo).filter(n=>n.value!==void 0&&n.value!==null&&(n.operator!=="or"||n.operator==="or"&&n.value.length!==0)&&(n.operator!=="and"||n.operator==="and"&&n.value.length!==0))),"unionFilters"),hr=o((e,t)=>_o(e,t,Xo).filter(r=>r.order!==void 0&&r.order!==null),"unionSorters"),Cr=o((e,t)=>[...Oo(t,e,jo),...e],"setInitialFilters"),br=o((e,t)=>[...Oo(t,e,Xo),...e],"setInitialSorters"),kn=o((e,t)=>{if(!t)return;let r=t.find(s=>s.field===e);if(r)return r.order},"getDefaultSortOrder"),Fn=o((e,t,r="eq")=>{let s=t==null?void 0:t.find(n=>{if(n.operator!=="or"&&n.operator!=="and"&&"field"in n){let{operator:i,field:a}=n;return a===e&&i===r}});if(s)return s.value||[]},"getDefaultFilter");var Qn=o(e=>new Promise((t,r)=>{let s=new FileReader,n=o(()=>{s.result&&(s.removeEventListener("load",n,!1),t(s.result))},"resultHandler");s.addEventListener("load",n,!1),s.readAsDataURL(e.originFileObj),s.onerror=i=>(s.removeEventListener("load",n,!1),r(i))}),"file2Base64");var W=o(()=>{let{options:{useNewQueryKeys:e}}=oe();return{keys:We,preferLegacyKeys:!e}},"useKeys");function Vn({v3LegacyAuthProviderCompatible:e=!1,options:t}={}){let{getPermissions:r}=se(),{getPermissions:s}=pe(),{keys:n,preferLegacyKeys:i}=W(),a=Yo({queryKey:n().auth().action("permissions").get(i),queryFn:s??(()=>Promise.resolve(void 0)),enabled:!e&&!!s,...e?{}:t,meta:{...e?{}:t==null?void 0:t.meta,...Jo("usePermissions",i)}}),u=Yo({queryKey:[...n().auth().action("permissions").get(i),"v3LegacyAuthProviderCompatible"],queryFn:r??(()=>Promise.resolve(void 0)),enabled:e&&!!r,...e?t:{},meta:{...e?t==null?void 0:t.meta:{},...Jo("usePermissions",i)}});return e?u:a}o(Vn,"usePermissions");import{useQuery as Zo}from"@tanstack/react-query";import{getXRay as qo}from"@refinedev/devtools-internal";function _r({v3LegacyAuthProviderCompatible:e=!1,queryOptions:t}={}){let{getUserIdentity:r}=se(),{getIdentity:s}=pe(),{keys:n,preferLegacyKeys:i}=W(),a=Zo({queryKey:n().auth().action("identity").get(i),queryFn:s??(()=>Promise.resolve({})),enabled:!e&&!!s,retry:!1,...e===!0?{}:t,meta:{...e===!0?{}:t==null?void 0:t.meta,...qo("useGetIdentity",i)}}),u=Zo({queryKey:[...n().auth().action("identity").get(i),"v3LegacyAuthProviderCompatible"],queryFn:r??(()=>Promise.resolve({})),enabled:e&&!!r,retry:!1,...e?t:{},meta:{...e?t==null?void 0:t.meta:{},...qo("useGetIdentity",i)}});return e?u:a}o(_r,"useGetIdentity");import{useMutation as es}from"@tanstack/react-query";import{getXRay as ts}from"@refinedev/devtools-internal";import{useQueryClient as Bn}from"@tanstack/react-query";var Et=o(()=>{let e=Bn(),{keys:t,preferLegacyKeys:r}=W();return o(async()=>{await Promise.all(["check","identity","permissions"].map(n=>e.invalidateQueries(t().auth().action(n).get(r))))},"invalidate")},"useInvalidateAuthStore");function vr({v3LegacyAuthProviderCompatible:e,mutationOptions:t}={}){let r=Et(),s=q(),n=me(),{push:i}=le(),{open:a,close:u}=Ie(),{logout:d}=se(),{logout:c}=pe(),{keys:p,preferLegacyKeys:m}=W(),R=es({mutationKey:p().auth().action("logout").get(m),mutationFn:c,onSuccess:async(T,E)=>{let{success:D,error:f,redirectTo:h}=T,{redirectPath:L}=E??{},w=L??h;D&&(u==null||u("useLogout-error")),(f||!D)&&(a==null||a(Or(f))),w!==!1&&(s==="legacy"?i(w??"/login"):w&&n({to:w})),await r()},onError:T=>{a==null||a(Or(T))},...e===!0?{}:t,meta:{...e===!0?{}:t==null?void 0:t.meta,...ts("useLogout",m)}}),g=es({mutationKey:[...p().auth().action("logout").get(m),"v3LegacyAuthProviderCompatible"],mutationFn:d,onSuccess:async(T,E)=>{let D=(E==null?void 0:E.redirectPath)??T;if(D!==!1){if(D){s==="legacy"?i(D):n({to:D});return}s==="legacy"?i("/login"):n({to:"/login"}),await r()}},onError:T=>{a==null||a(Or(T))},...e?t:{},meta:{...e?t==null?void 0:t.meta:{},...ts("useLogout",m)}});return e?g:R}o(vr,"useLogout");var Or=o(e=>({key:"useLogout-error",type:"error",message:(e==null?void 0:e.name)||"Logout Error",description:(e==null?void 0:e.message)||"Something went wrong during logout"}),"buildNotification");import Nn from"react";import{useMutation as rs}from"@tanstack/react-query";import{getXRay as os}from"@refinedev/devtools-internal";import Kn from"qs";function Gt({v3LegacyAuthProviderCompatible:e,mutationOptions:t}={}){let r=Et(),s=q(),n=me(),{replace:i}=le(),a=ye(),{useLocation:u}=ne(),{search:d}=u(),{close:c,open:p}=Ie(),{login:m}=se(),{login:R}=pe(),{keys:g,preferLegacyKeys:T}=W(),E=Nn.useMemo(()=>{var h;return s==="legacy"?Kn.parse(d,{ignoreQueryPrefix:!0}).to:(h=a.params)==null?void 0:h.to},[s,a.params,d]),D=rs({mutationKey:g().auth().action("login").get(T),mutationFn:R,onSuccess:async({success:h,redirectTo:L,error:w})=>{h&&(c==null||c("login-error")),(w||!h)&&(p==null||p(jr(w))),E&&h?s==="legacy"?i(E):n({to:E,type:"replace"}):L?s==="legacy"?i(L):n({to:L,type:"replace"}):s==="legacy"&&i("/"),await r()},onError:h=>{p==null||p(jr(h))},...e===!0?{}:t,meta:{...e===!0?{}:t==null?void 0:t.meta,...os("useLogin",T)}}),f=rs({mutationKey:[...g().auth().action("login").get(T),"v3LegacyAuthProviderCompatible"],mutationFn:m,onSuccess:async h=>{E&&i(E),h!==!1&&!E&&(typeof h=="string"?s==="legacy"?i(h):n({to:h,type:"replace"}):s==="legacy"?i("/"):n({to:"/",type:"replace"})),await r(),c==null||c("login-error")},onError:h=>{p==null||p(jr(h))},...e?t:{},meta:{...e?t==null?void 0:t.meta:{},...os("useLogin",T)}});return e?f:D}o(Gt,"useLogin");var jr=o(e=>({message:(e==null?void 0:e.name)||"Login Error",description:(e==null?void 0:e.message)||"Invalid credentials",key:"login-error",type:"error"}),"buildNotification");import{useMutation as ss}from"@tanstack/react-query";import{getXRay as ns}from"@refinedev/devtools-internal";function Yr({v3LegacyAuthProviderCompatible:e,mutationOptions:t}={}){let r=Et(),s=q(),n=me(),{replace:i}=le(),{register:a}=se(),{register:u}=pe(),{close:d,open:c}=Ie(),{keys:p,preferLegacyKeys:m}=W(),R=ss({mutationKey:p().auth().action("register").get(m),mutationFn:u,onSuccess:async({success:T,redirectTo:E,error:D})=>{T&&(d==null||d("register-error")),(D||!T)&&(c==null||c(Xr(D))),E?s==="legacy"?i(E):n({to:E,type:"replace"}):s==="legacy"&&i("/"),await r()},onError:T=>{c==null||c(Xr(T))},...e===!0?{}:t,meta:{...e===!0?{}:t==null?void 0:t.meta,...ns("useRegister",m)}}),g=ss({mutationKey:[...p().auth().action("register").get(m),"v3LegacyAuthProviderCompatible"],mutationFn:a,onSuccess:async T=>{T!==!1&&(T?s==="legacy"?i(T):n({to:T,type:"replace"}):s==="legacy"?i("/"):n({to:"/",type:"replace"}),await r(),d==null||d("register-error"))},onError:T=>{c==null||c(Xr(T))},...e?t:{},meta:{...e?t==null?void 0:t.meta:{},...ns("useRegister",m)}});return e?g:R}o(Yr,"useRegister");var Xr=o(e=>({message:(e==null?void 0:e.name)||"Register Error",description:(e==null?void 0:e.message)||"Error while registering",key:"register-error",type:"error"}),"buildNotification");import{useMutation as as}from"@tanstack/react-query";import{getXRay as is}from"@refinedev/devtools-internal";function Zr({v3LegacyAuthProviderCompatible:e,mutationOptions:t}={}){let r=q(),s=me(),{replace:n}=le(),{forgotPassword:i}=se(),{forgotPassword:a}=pe(),{close:u,open:d}=Ie(),{keys:c,preferLegacyKeys:p}=W(),m=as({mutationKey:c().auth().action("forgotPassword").get(p),mutationFn:a,onSuccess:({success:g,redirectTo:T,error:E})=>{g&&(u==null||u("forgot-password-error")),(E||!g)&&(d==null||d(Jr(E))),T&&(r==="legacy"?n(T):s({to:T,type:"replace"}))},onError:g=>{d==null||d(Jr(g))},...e===!0?{}:t,meta:{...e===!0?{}:t==null?void 0:t.meta,...is("useForgotPassword",p)}}),R=as({mutationKey:[...c().auth().action("forgotPassword").get(p),"v3LegacyAuthProviderCompatible"],mutationFn:i,onSuccess:g=>{g!==!1&&g&&(r==="legacy"?n(g):s({to:g,type:"replace"})),u==null||u("forgot-password-error")},onError:g=>{d==null||d(Jr(g))},...e?t:{},meta:{...e?t==null?void 0:t.meta:{},...is("useForgotPassword",p)}});return e?R:m}o(Zr,"useForgotPassword");var Jr=o(e=>({message:(e==null?void 0:e.name)||"Forgot Password Error",description:(e==null?void 0:e.message)||"Error while resetting password",key:"forgot-password-error",type:"error"}),"buildNotification");import Hn from"react";import{useMutation as us}from"@tanstack/react-query";import{getXRay as cs}from"@refinedev/devtools-internal";import Gn from"qs";function eo({v3LegacyAuthProviderCompatible:e,mutationOptions:t}={}){let r=q(),s=me(),{replace:n}=le(),{updatePassword:i}=se(),{updatePassword:a}=pe(),{close:u,open:d}=Ie(),{keys:c,preferLegacyKeys:p}=W(),m=ye(),{useLocation:R}=ne(),{search:g}=R(),T=Hn.useMemo(()=>r==="legacy"?Gn.parse(g,{ignoreQueryPrefix:!0})??{}:m.params??{},[g,m,r]),E=us({mutationKey:c().auth().action("updatePassword").get(p),mutationFn:async f=>a==null?void 0:a({...T,...f}),onSuccess:({success:f,redirectTo:h,error:L})=>{f&&(u==null||u("update-password-error")),(L||!f)&&(d==null||d(qr(L))),h&&(r==="legacy"?n(h):s({to:h,type:"replace"}))},onError:f=>{d==null||d(qr(f))},...e===!0?{}:t,meta:{...e===!0?{}:t==null?void 0:t.meta,...cs("useUpdatePassword",p)}}),D=us({mutationKey:[...c().auth().action("updatePassword").get(p),"v3LegacyAuthProviderCompatible"],mutationFn:async f=>i==null?void 0:i({...T,...f}),onSuccess:f=>{f!==!1&&f&&(r==="legacy"?n(f):s({to:f,type:"replace"})),u==null||u("update-password-error")},onError:f=>{d==null||d(qr(f))},...e?t:{},meta:{...e?t==null?void 0:t.meta:{},...cs("useUpdatePassword",p)}});return e?D:E}o(eo,"useUpdatePassword");var qr=o(e=>({message:(e==null?void 0:e.name)||"Update Password Error",description:(e==null?void 0:e.message)||"Error while updating password",key:"update-password-error",type:"error"}),"buildNotification");import{useQuery as ds}from"@tanstack/react-query";import{getXRay as ps}from"@refinedev/devtools-internal";function Dr({v3LegacyAuthProviderCompatible:e=!1,params:t}={}){let{checkAuth:r}=se(),{check:s}=pe(),{keys:n,preferLegacyKeys:i}=W(),a=ds({queryKey:n().auth().action("check").params(t).get(i),queryFn:async()=>await(s==null?void 0:s(t))??{},retry:!1,enabled:!e,meta:{...ps("useIsAuthenticated",i)}}),u=ds({queryKey:[...n().auth().action("check").params(t).get(i),"v3LegacyAuthProviderCompatible"],queryFn:async()=>await(r==null?void 0:r(t))??{},retry:!1,enabled:e,meta:{...ps("useIsAuthenticated",i)}});return e?u:a}o(Dr,"useIsAuthenticated");var $n=Dr;import{useMutation as ls}from"@tanstack/react-query";import{getXRay as ms}from"@refinedev/devtools-internal";function ae({v3LegacyAuthProviderCompatible:e=!1}={}){let t=q(),r=me(),{replace:s}=le(),{checkError:n}=se(),{onError:i}=pe(),{keys:a,preferLegacyKeys:u}=W(),{mutate:d}=vr({v3LegacyAuthProviderCompatible:!!e}),{mutate:c}=vr({v3LegacyAuthProviderCompatible:!!e}),p=ls({mutationKey:a().auth().action("onError").get(u),mutationFn:i,onSuccess:({logout:R,redirectTo:g})=>{if(R){c({redirectPath:g});return}if(g){t==="legacy"?s(g):r({to:g,type:"replace"});return}},meta:{...ms("useOnError",u)}}),m=ls({mutationKey:[...a().auth().action("onError").get(u),"v3LegacyAuthProviderCompatible"],mutationFn:n,onError:R=>{d({redirectPath:R})},meta:{...ms("useOnError",u)}});return e?m:p}o(ae,"useOnError");var Wn=ae;var to=o(()=>{let{isProvided:e}=se(),{isProvided:t}=pe();return!!(t||e)},"useIsExistAuthentication");import{getXRay as _n}from"@refinedev/devtools-internal";import{useQuery as On}from"@tanstack/react-query";import{useEffect as fs,useState as zn}from"react";var ee=o(({isLoading:e,interval:t,onInterval:r})=>{let[s,n]=zn(void 0),{options:i}=oe(),{overtime:a}=i,u=t??a.interval,d=r??(a==null?void 0:a.onInterval);return fs(()=>{let c;return e&&(c=setInterval(()=>{n(p=>p===void 0?u:p+u)},u)),()=>{clearInterval(c),n(void 0)}},[e,u]),fs(()=>{d&&s&&d(s)},[s]),{elapsedTime:s}},"useLoadingOvertime");var $t=o(({resource:e,config:t,filters:r,hasPagination:s,pagination:n,sorters:i,queryOptions:a,successNotification:u,errorNotification:d,meta:c,metaData:p,liveMode:m,onLiveEvent:R,liveParams:g,dataProviderName:T,overtimeOptions:E}={})=>{let{resources:D,resource:f,identifier:h}=G(e),L=re(),w=_(),x=Y(),{mutate:y}=ae({v3LegacyAuthProviderCompatible:!!(x!=null&&x.isLegacy)}),l=ie(),C=J(),{keys:b,preferLegacyKeys:P}=W(),M=z(h,T,D),v=S(c,p),U=S(r,t==null?void 0:t.filters),k=S(i,t==null?void 0:t.sort),I=S(s,t==null?void 0:t.hasPagination),F=Kt({pagination:n,configPagination:t==null?void 0:t.pagination,hasPagination:I}),A=F.mode==="server",H=C({resource:f,meta:v}),N={meta:H,metaData:H,filters:U,hasPagination:A,pagination:F,sorters:k,config:{...t,sort:k}},V=(a==null?void 0:a.enabled)===void 0||(a==null?void 0:a.enabled)===!0,{getList:O}=L(M);at({resource:h,types:["*"],params:{meta:H,metaData:H,pagination:F,hasPagination:A,sort:k,sorters:k,filters:U,subscriptionType:"useList",...g},channel:`resources/${f==null?void 0:f.name}`,enabled:V,liveMode:m,onLiveEvent:R,dataProviderName:M,meta:{...c,dataProviderName:T}});let B=On({queryKey:b().data(M).resource(h??"").action("list").params({...v||{},filters:U,hasPagination:A,...A&&{pagination:F},...i&&{sorters:i},...(t==null?void 0:t.sort)&&{sort:t==null?void 0:t.sort}}).get(P),queryFn:({queryKey:Q,pageParam:K,signal:X})=>O({resource:(f==null?void 0:f.name)??"",pagination:F,hasPagination:A,filters:U,sort:k,sorters:k,meta:{...H,queryContext:{queryKey:Q,pageParam:K,signal:X}},metaData:{...H,queryContext:{queryKey:Q,pageParam:K,signal:X}}}),...a,enabled:typeof(a==null?void 0:a.enabled)<"u"?a==null?void 0:a.enabled:!!(f!=null&&f.name),select:Q=>{var he;let K=Q,{current:X,mode:j,pageSize:Z}=F;return j==="client"&&(K={...K,data:K.data.slice((X-1)*Z,X*Z),total:K.total}),a!=null&&a.select?(he=a==null?void 0:a.select)==null?void 0:he.call(a,K):K},onSuccess:Q=>{var X;(X=a==null?void 0:a.onSuccess)==null||X.call(a,Q);let K=typeof u=="function"?u(Q,N,h):u;l(K)},onError:Q=>{var X;y(Q),(X=a==null?void 0:a.onError)==null||X.call(a,Q);let K=typeof d=="function"?d(Q,N,h):d;l(K,{key:`${h}-useList-notification`,message:w("notifications.error",{statusCode:Q.statusCode},`Error (status code: ${Q.statusCode})`),description:Q.message,type:"error"})},meta:{...a==null?void 0:a.meta,..._n("useList",P)}}),{elapsedTime:$}=ee({isLoading:B.isFetching,interval:E==null?void 0:E.interval,onInterval:E==null?void 0:E.onInterval});return{...B,overtime:{elapsedTime:$}}},"useList");import{getXRay as jn}from"@refinedev/devtools-internal";import{useQuery as Xn}from"@tanstack/react-query";var Wt=o(({resource:e,id:t,queryOptions:r,successNotification:s,errorNotification:n,meta:i,metaData:a,liveMode:u,onLiveEvent:d,liveParams:c,dataProviderName:p,overtimeOptions:m})=>{let{resources:R,resource:g,identifier:T}=G(e),E=re(),D=_(),f=Y(),{mutate:h}=ae({v3LegacyAuthProviderCompatible:!!(f!=null&&f.isLegacy)}),L=ie(),w=J(),{keys:x,preferLegacyKeys:y}=W(),l=S(i,a),C=z(T,p,R),{getOne:b}=E(C),P=w({resource:g,meta:l});at({resource:T,types:["*"],channel:`resources/${g==null?void 0:g.name}`,params:{ids:t?[t]:[],id:t,meta:P,metaData:P,subscriptionType:"useOne",...c},enabled:typeof(r==null?void 0:r.enabled)<"u"?r==null?void 0:r.enabled:typeof(g==null?void 0:g.name)<"u"&&typeof t<"u",liveMode:u,onLiveEvent:d,dataProviderName:C,meta:{...i,dataProviderName:p}});let M=Xn({queryKey:x().data(C).resource(T??"").action("one").id(t??"").params({...l||{}}).get(y),queryFn:({queryKey:U,pageParam:k,signal:I})=>b({resource:(g==null?void 0:g.name)??"",id:t,meta:{...P,queryContext:{queryKey:U,pageParam:k,signal:I}},metaData:{...P,queryContext:{queryKey:U,pageParam:k,signal:I}}}),...r,enabled:typeof(r==null?void 0:r.enabled)<"u"?r==null?void 0:r.enabled:typeof t<"u",onSuccess:U=>{var I;(I=r==null?void 0:r.onSuccess)==null||I.call(r,U);let k=typeof s=="function"?s(U,{id:t,...P},T):s;L(k)},onError:U=>{var I;h(U),(I=r==null?void 0:r.onError)==null||I.call(r,U);let k=typeof n=="function"?n(U,{id:t,...P},T):n;L(k,{key:`${t}-${T}-getOne-notification`,message:D("notifications.error",{statusCode:U.statusCode},`Error (status code: ${U.statusCode})`),description:U.message,type:"error"})},meta:{...r==null?void 0:r.meta,...jn("useOne",y)}}),{elapsedTime:v}=ee({isLoading:M.isFetching,interval:m==null?void 0:m.interval,onInterval:m==null?void 0:m.onInterval});return{...M,overtime:{elapsedTime:v}}},"useOne");import{getXRay as Yn}from"@refinedev/devtools-internal";import{useQuery as Jn}from"@tanstack/react-query";var ro=o(({resource:e,ids:t,queryOptions:r,successNotification:s,errorNotification:n,meta:i,metaData:a,liveMode:u,onLiveEvent:d,liveParams:c,dataProviderName:p,overtimeOptions:m})=>{let{resources:R,resource:g,identifier:T}=G(e),E=re(),D=_(),f=Y(),{mutate:h}=ae({v3LegacyAuthProviderCompatible:!!(f!=null&&f.isLegacy)}),L=ie(),w=J(),{keys:x,preferLegacyKeys:y}=W(),l=S(i,a),C=z(T,p,R),b=(r==null?void 0:r.enabled)===void 0||(r==null?void 0:r.enabled)===!0,{getMany:P,getOne:M}=E(C),v=w({resource:g,meta:l});at({resource:T,types:["*"],params:{ids:t,meta:v,metaData:v,subscriptionType:"useMany",...c},channel:`resources/${g.name}`,enabled:b,liveMode:u,onLiveEvent:d,dataProviderName:C,meta:{...i,dataProviderName:p}});let U=Jn({queryKey:x().data(C).resource(T).action("many").ids(...t).params({...l||{}}).get(y),queryFn:({queryKey:I,pageParam:F,signal:A})=>P?P({resource:g==null?void 0:g.name,ids:t,meta:{...v,queryContext:{queryKey:I,pageParam:F,signal:A}},metaData:{...v,queryContext:{queryKey:I,pageParam:F,signal:A}}}):Ze(t.map(H=>M({resource:g==null?void 0:g.name,id:H,meta:{...v,queryContext:{queryKey:I,pageParam:F,signal:A}},metaData:{...v,queryContext:{queryKey:I,pageParam:F,signal:A}}}))),...r,onSuccess:I=>{var A;(A=r==null?void 0:r.onSuccess)==null||A.call(r,I);let F=typeof s=="function"?s(I,t,T):s;L(F)},onError:I=>{var A;h(I),(A=r==null?void 0:r.onError)==null||A.call(r,I);let F=typeof n=="function"?n(I,t,T):n;L(F,{key:`${t[0]}-${T}-getMany-notification`,message:D("notifications.error",{statusCode:I.statusCode},`Error (status code: ${I.statusCode})`),description:I.message,type:"error"})},meta:{...r==null?void 0:r.meta,...Yn("useMany",y)}}),{elapsedTime:k}=ee({isLoading:U.isFetching,interval:m==null?void 0:m.interval,onInterval:m==null?void 0:m.onInterval});return{...U,overtime:{elapsedTime:k}}},"useMany");import{getXRay as ta}from"@refinedev/devtools-internal";import{useMutation as ra,useQueryClient as oa}from"@tanstack/react-query";import so,{useReducer as Zn}from"react";import oo from"lodash-es/isEqual";var Lr=so.createContext({notifications:[],notificationDispatch:()=>!1}),qn=[],ea=o((e,t)=>{switch(t.type){case"ADD":return[...e.filter(s=>!(oo(s.id,t.payload.id)&&s.resource==t.payload.resource)),{...t.payload,isRunning:!0}];case"REMOVE":return e.filter(s=>!(oo(s.id,t.payload.id)&&s.resource==t.payload.resource));case"DECREASE_NOTIFICATION_SECOND":return e.map(s=>oo(s.id,t.payload.id)&&s.resource==t.payload.resource?{...s,seconds:t.payload.seconds-1e3}:s);default:return e}},"undoableQueueReducer"),no=o(({children:e})=>{let[t,r]=Zn(ea,qn),s={notifications:t,notificationDispatch:r};return so.createElement(Lr.Provider,{value:s},e,typeof window<"u"&&t.map(n=>so.createElement(ys,{key:`${n.id}-${n.resource}-queue`,notification:n})))},"UndoableQueueContextProvider");var Er=o(({mutationOptions:e,overtimeOptions:t}={})=>{let{resources:r,select:s}=G(),n=oa(),i=re(),{mutationMode:a,undoableTimeout:u}=ze(),d=_(),c=Y(),{mutate:p}=ae({v3LegacyAuthProviderCompatible:!!(c!=null&&c.isLegacy)}),m=Ve(),{log:R}=Be(),{notificationDispatch:g}=Xe(),T=ie(),E=Ce(),D=J(),{options:{textTransformers:f}}=oe(),{keys:h,preferLegacyKeys:L}=W(),w=ra({mutationFn:({id:y,values:l,resource:C,mutationMode:b,undoableTimeout:P,onCancel:M,meta:v,metaData:U,dataProviderName:k})=>{let{resource:I,identifier:F}=s(C),A=D({resource:I,meta:S(v,U)}),H=b??a,N=P??u;return H!=="undoable"?i(z(F,k,r)).update({resource:I.name,id:y,variables:l,meta:A,metaData:A}):new Promise((O,B)=>{let $=o(()=>{i(z(F,k,r)).update({resource:I.name,id:y,variables:l,meta:A,metaData:A}).then(K=>O(K)).catch(K=>B(K))},"doMutation"),Q=o(()=>{B({message:"mutationCancelled"})},"cancelMutation");M&&M(Q),g({type:"ADD",payload:{id:y,resource:F,cancelMutation:Q,doMutation:$,seconds:N,isSilent:!!M}})})},onMutate:async({resource:y,id:l,mutationMode:C,values:b,dataProviderName:P,meta:M,metaData:v,optimisticUpdateMap:U={list:!0,many:!0,detail:!0}})=>{let{identifier:k}=s(y),{gqlMutation:I,gqlQuery:F,...A}=S(M,v)??{},H=Je(L)(k,z(k,P,r),A),N=h().data(z(k,P,r)).resource(k),V=n.getQueriesData(N.get(L)),O=C??a;return await n.cancelQueries(N.get(L),void 0,{silent:!0}),O!=="pessimistic"&&(U.list&&n.setQueriesData(N.action("list").params(A??{}).get(L),B=>{if(typeof U.list=="function")return U.list(B,b,l);if(!B)return null;let $=B.data.map(Q=>{var K;return((K=Q.id)==null?void 0:K.toString())===(l==null?void 0:l.toString())?{id:l,...Q,...b}:Q});return{...B,data:$}}),U.many&&n.setQueriesData(N.action("many").get(L),B=>{if(typeof U.many=="function")return U.many(B,b,l);if(!B)return null;let $=B.data.map(Q=>{var K;return((K=Q.id)==null?void 0:K.toString())===(l==null?void 0:l.toString())&&(Q={id:l,...Q,...b}),Q});return{...B,data:$}}),U.detail&&n.setQueriesData(N.action("one").id(l).params(A??{}).get(L),B=>typeof U.detail=="function"?U.detail(B,b,l):B?{...B,data:{...B.data,...b}}:null)),{previousQueries:V,queryKey:H}},onSettled:(y,l,{id:C,resource:b,dataProviderName:P,invalidates:M=["list","many","detail"]})=>{let{identifier:v}=s(b);E({resource:v,dataProviderName:z(v,P,r),invalidates:M,id:C}),g({type:"REMOVE",payload:{id:C,resource:v}})},onSuccess:(y,{id:l,resource:C,successNotification:b,dataProviderName:P,values:M,meta:v,metaData:U},k)=>{var X;let{resource:I,identifier:F}=s(C),A=f.singular(F),H=z(F,P,r),N=D({resource:I,meta:S(v,U)}),V=typeof b=="function"?b(y,{id:l,values:M},F):b;T(V,{key:`${l}-${F}-notification`,description:d("notifications.success","Successful"),message:d("notifications.editSuccess",{resource:d(`${F}.${F}`,A)},`Successfully updated ${A}`),type:"success"}),m==null||m({channel:`resources/${I.name}`,type:"updated",payload:{ids:(X=y.data)!=null&&X.id?[y.data.id]:void 0},date:new Date,meta:{...N,dataProviderName:H}});let O;if(k){let j=n.getQueryData(k.queryKey.detail(l));O=Object.keys(M||{}).reduce((Z,he)=>{var ve;return Z[he]=(ve=j==null?void 0:j.data)==null?void 0:ve[he],Z},{})}let{fields:B,operation:$,variables:Q,...K}=N||{};R==null||R.mutate({action:"update",resource:I.name,data:M,previousData:O,meta:{id:l,dataProviderName:H,...K}})},onError:(y,{id:l,resource:C,errorNotification:b,values:P},M)=>{let{identifier:v}=s(C);if(M)for(let U of M.previousQueries)n.setQueryData(U[0],U[1]);if(y.message!=="mutationCancelled"){p==null||p(y);let U=f.singular(v),k=typeof b=="function"?b(y,{id:l,values:P},v):b;T(k,{key:`${l}-${v}-notification`,message:d("notifications.editError",{resource:d(`${v}.${v}`,U),statusCode:y.statusCode},`Error when updating ${U} (status code: ${y.statusCode})`),description:y.message,type:"error"})}},mutationKey:h().data().mutation("update").get(L),...e,meta:{...e==null?void 0:e.meta,...ta("useUpdate",L)}}),{elapsedTime:x}=ee({isLoading:w.isLoading,interval:t==null?void 0:t.interval,onInterval:t==null?void 0:t.onInterval});return{...w,overtime:{elapsedTime:x}}},"useUpdate");import{getXRay as sa}from"@refinedev/devtools-internal";import{useMutation as na}from"@tanstack/react-query";var zt=o(({mutationOptions:e,overtimeOptions:t}={})=>{let r=Y(),{mutate:s}=ae({v3LegacyAuthProviderCompatible:!!(r!=null&&r.isLegacy)}),n=re(),i=Ce(),{resources:a,select:u}=G(),d=_(),c=Ve(),{log:p}=Be(),m=ie(),R=J(),{options:{textTransformers:g}}=oe(),{keys:T,preferLegacyKeys:E}=W(),D=na({mutationFn:({resource:h,values:L,meta:w,metaData:x,dataProviderName:y})=>{let{resource:l,identifier:C}=u(h),b=R({resource:l,meta:S(w,x)});return n(z(C,y,a)).create({resource:l.name,variables:L,meta:b,metaData:b})},onSuccess:(h,{resource:L,successNotification:w,dataProviderName:x,invalidates:y=["list","many"],values:l,meta:C,metaData:b})=>{var V,O;let{resource:P,identifier:M}=u(L),v=g.singular(M),U=z(M,x,a),k=R({resource:P,meta:S(C,b)}),I=typeof w=="function"?w(h,l,M):w;m(I,{key:`create-${M}-notification`,message:d("notifications.createSuccess",{resource:d(`${M}.${M}`,v)},`Successfully created ${v}`),description:d("notifications.success","Success"),type:"success"}),i({resource:M,dataProviderName:U,invalidates:y}),c==null||c({channel:`resources/${P.name}`,type:"created",payload:{ids:(V=h==null?void 0:h.data)!=null&&V.id?[h.data.id]:void 0},date:new Date,meta:{...k,dataProviderName:U}});let{fields:F,operation:A,variables:H,...N}=k||{};p==null||p.mutate({action:"create",resource:P.name,data:l,meta:{dataProviderName:U,id:((O=h==null?void 0:h.data)==null?void 0:O.id)??void 0,...N}})},onError:(h,{resource:L,errorNotification:w,values:x})=>{s(h);let{identifier:y}=u(L),l=g.singular(y),C=typeof w=="function"?w(h,x,y):w;m(C,{key:`create-${y}-notification`,description:h.message,message:d("notifications.createError",{resource:d(`${y}.${y}`,l),statusCode:h.statusCode},`There was an error creating ${l} (status code: ${h.statusCode})`),type:"error"})},mutationKey:T().data().mutation("create").get(E),...e,meta:{...e==null?void 0:e.meta,...sa("useCreate",E)}}),{elapsedTime:f}=ee({isLoading:D.isLoading,interval:t==null?void 0:t.interval,onInterval:t==null?void 0:t.onInterval});return{...D,overtime:{elapsedTime:f}}},"useCreate");import{getXRay as aa}from"@refinedev/devtools-internal";import{useMutation as ia,useQueryClient as ua}from"@tanstack/react-query";var ca=o(({mutationOptions:e,overtimeOptions:t}={})=>{let r=Y(),{mutate:s}=ae({v3LegacyAuthProviderCompatible:!!(r!=null&&r.isLegacy)}),n=re(),{resources:i,select:a}=G(),u=ua(),{mutationMode:d,undoableTimeout:c}=ze(),{notificationDispatch:p}=Xe(),m=_(),R=Ve(),{log:g}=Be(),T=ie(),E=Ce(),D=J(),{options:{textTransformers:f}}=oe(),{keys:h,preferLegacyKeys:L}=W(),w=ia({mutationFn:({id:y,mutationMode:l,undoableTimeout:C,resource:b,onCancel:P,meta:M,metaData:v,dataProviderName:U,values:k})=>{let{resource:I,identifier:F}=a(b),A=D({resource:I,meta:S(M,v)}),H=l??d,N=C??c;return H!=="undoable"?n(z(F,U,i)).deleteOne({resource:I.name,id:y,meta:A,metaData:A,variables:k}):new Promise((O,B)=>{let $=o(()=>{n(z(F,U,i)).deleteOne({resource:I.name,id:y,meta:A,metaData:A,variables:k}).then(K=>O(K)).catch(K=>B(K))},"doMutation"),Q=o(()=>{B({message:"mutationCancelled"})},"cancelMutation");P&&P(Q),p({type:"ADD",payload:{id:y,resource:F,cancelMutation:Q,doMutation:$,seconds:N,isSilent:!!P}})})},onMutate:async({id:y,resource:l,mutationMode:C,dataProviderName:b,meta:P,metaData:M})=>{let{identifier:v}=a(l),{gqlMutation:U,gqlQuery:k,...I}=S(P,M)??{},F=Je(L)(v,z(v,b,i),I),A=h().data(z(v,b,i)).resource(v),H=C??d;await u.cancelQueries(A.get(L),void 0,{silent:!0});let N=u.getQueriesData(A.get(L));return H!=="pessimistic"&&(u.setQueriesData(A.action("list").params(I??{}).get(L),V=>V?{data:V.data.filter(B=>{var $;return(($=B.id)==null?void 0:$.toString())!==y.toString()}),total:V.total-1}:null),u.setQueriesData(A.action("many").get(L),V=>{if(!V)return null;let O=V.data.filter(B=>{var $;return(($=B.id)==null?void 0:$.toString())!==(y==null?void 0:y.toString())});return{...V,data:O}})),{previousQueries:N,queryKey:F}},onSettled:(y,l,{id:C,resource:b,dataProviderName:P,invalidates:M=["list","many"]})=>{let{identifier:v}=a(b);E({resource:v,dataProviderName:z(v,P,i),invalidates:M}),p({type:"REMOVE",payload:{id:C,resource:v}})},onSuccess:(y,{id:l,resource:C,successNotification:b,dataProviderName:P,meta:M,metaData:v},U)=>{let{resource:k,identifier:I}=a(C),F=f.singular(I),A=z(I,P,i),H=D({resource:k,meta:S(M,v)});u.removeQueries(U==null?void 0:U.queryKey.detail(l));let N=typeof b=="function"?b(y,l,I):b;T(N,{key:`${l}-${I}-notification`,description:m("notifications.success","Success"),message:m("notifications.deleteSuccess",{resource:m(`${I}.${I}`,F)},`Successfully deleted a ${F}`),type:"success"}),R==null||R({channel:`resources/${k.name}`,type:"deleted",payload:{ids:[l]},date:new Date,meta:{...H,dataProviderName:A}});let{fields:V,operation:O,variables:B,...$}=H||{};g==null||g.mutate({action:"delete",resource:k.name,meta:{id:l,dataProviderName:A,...$}}),u.removeQueries(U==null?void 0:U.queryKey.detail(l))},onError:(y,{id:l,resource:C,errorNotification:b},P)=>{let{identifier:M}=a(C);if(P)for(let v of P.previousQueries)u.setQueryData(v[0],v[1]);if(y.message!=="mutationCancelled"){s(y);let v=f.singular(M),U=typeof b=="function"?b(y,l,M):b;T(U,{key:`${l}-${M}-notification`,message:m("notifications.deleteError",{resource:v,statusCode:y.statusCode},`Error (status code: ${y.statusCode})`),description:y.message,type:"error"})}},mutationKey:h().data().mutation("delete").get(L),...e,meta:{...e==null?void 0:e.meta,...aa("useDelete",L)}}),{elapsedTime:x}=ee({isLoading:w.isLoading,interval:t==null?void 0:t.interval,onInterval:t==null?void 0:t.onInterval});return{...w,overtime:{elapsedTime:x}}},"useDelete");import{getXRay as da}from"@refinedev/devtools-internal";import{useMutation as pa}from"@tanstack/react-query";var ao=o(({mutationOptions:e,overtimeOptions:t}={})=>{let r=re(),{resources:s,select:n}=G(),i=_(),a=Ve(),u=ie(),d=Ce(),{log:c}=Be(),p=J(),{options:{textTransformers:m}}=oe(),{keys:R,preferLegacyKeys:g}=W(),T=pa({mutationFn:({resource:D,values:f,meta:h,metaData:L,dataProviderName:w})=>{let{resource:x,identifier:y}=n(D),l=p({resource:x,meta:S(h,L)}),C=r(z(y,w,s));return C.createMany?C.createMany({resource:x.name,variables:f,meta:l,metaData:l}):Ze(f.map(b=>C.create({resource:x.name,variables:b,meta:l,metaData:l})))},onSuccess:(D,{resource:f,successNotification:h,dataProviderName:L,invalidates:w=["list","many"],values:x,meta:y,metaData:l})=>{let{resource:C,identifier:b}=n(f),P=m.plural(b),M=z(b,L,s),v=p({resource:C,meta:S(y,l)}),U=typeof h=="function"?h(D,x,b):h;u(U,{key:`createMany-${b}-notification`,message:i("notifications.createSuccess",{resource:i(`${b}.${b}`,b)},`Successfully created ${P}`),description:i("notifications.success","Success"),type:"success"}),d({resource:b,dataProviderName:M,invalidates:w});let k=D==null?void 0:D.data.filter(N=>(N==null?void 0:N.id)!==void 0).map(N=>N.id);a==null||a({channel:`resources/${C.name}`,type:"created",payload:{ids:k},date:new Date,meta:{...v,dataProviderName:M}});let{fields:I,operation:F,variables:A,...H}=v||{};c==null||c.mutate({action:"createMany",resource:C.name,data:x,meta:{dataProviderName:M,ids:k,...H}})},onError:(D,{resource:f,errorNotification:h,values:L})=>{let{identifier:w}=n(f),x=typeof h=="function"?h(D,L,w):h;u(x,{key:`createMany-${w}-notification`,description:D.message,message:i("notifications.createError",{resource:i(`${w}.${w}`,w),statusCode:D.statusCode},`There was an error creating ${w} (status code: ${D.statusCode}`),type:"error"})},mutationKey:R().data().mutation("createMany").get(g),...e,meta:{...e==null?void 0:e.meta,...da("useCreateMany",g)}}),{elapsedTime:E}=ee({isLoading:T.isLoading,interval:t==null?void 0:t.interval,onInterval:t==null?void 0:t.onInterval});return{...T,overtime:{elapsedTime:E}}},"useCreateMany");import{getXRay as la}from"@refinedev/devtools-internal";import{useMutation as ma,useQueryClient as fa}from"@tanstack/react-query";var ya=o(({mutationOptions:e,overtimeOptions:t}={})=>{let{resources:r,select:s}=G(),n=fa(),i=re(),a=_(),{mutationMode:u,undoableTimeout:d}=ze(),c=Y(),{mutate:p}=ae({v3LegacyAuthProviderCompatible:!!(c!=null&&c.isLegacy)}),{notificationDispatch:m}=Xe(),R=Ve(),g=ie(),T=Ce(),{log:E}=Be(),D=J(),{options:{textTransformers:f}}=oe(),{keys:h,preferLegacyKeys:L}=W(),w=ma({mutationFn:({ids:y,values:l,resource:C,onCancel:b,mutationMode:P,undoableTimeout:M,meta:v,metaData:U,dataProviderName:k})=>{let{resource:I,identifier:F}=s(C),A=D({resource:I,meta:S(v,U)}),H=P??u,N=M??d,V=i(z(F,k,r)),O=o(()=>V.updateMany?V.updateMany({resource:I.name,ids:y,variables:l,meta:A,metaData:A}):Ze(y.map($=>V.update({resource:I.name,id:$,variables:l,meta:A,metaData:A}))),"mutationFn");return H!=="undoable"?O():new Promise(($,Q)=>{let K=o(()=>{O().then(j=>$(j)).catch(j=>Q(j))},"doMutation"),X=o(()=>{Q({message:"mutationCancelled"})},"cancelMutation");b&&b(X),m({type:"ADD",payload:{id:y,resource:F,cancelMutation:X,doMutation:K,seconds:N,isSilent:!!b}})})},onMutate:async({resource:y,ids:l,values:C,mutationMode:b,dataProviderName:P,meta:M,metaData:v,optimisticUpdateMap:U={list:!0,many:!0,detail:!0}})=>{let{identifier:k}=s(y),{gqlMutation:I,gqlQuery:F,...A}=S(M,v)??{},H=Je(L)(k,z(k,P,r),A),N=h().data(z(k,P,r)).resource(k),V=b??u;await n.cancelQueries(N.get(L),void 0,{silent:!0});let O=n.getQueriesData(N.get(L));if(V!=="pessimistic"&&(U.list&&n.setQueriesData(N.action("list").params(A??{}).get(L),B=>{if(typeof U.list=="function")return U.list(B,C,l);if(!B)return null;let $=B.data.map(Q=>Q.id!==void 0&&l.filter(K=>K!==void 0).map(String).includes(Q.id.toString())?{...Q,...C}:Q);return{...B,data:$}}),U.many&&n.setQueriesData(N.action("many").get(L),B=>{if(typeof U.many=="function")return U.many(B,C,l);if(!B)return null;let $=B.data.map(Q=>Q.id!==void 0&&l.filter(K=>K!==void 0).map(String).includes(Q.id.toString())?{...Q,...C}:Q);return{...B,data:$}}),U.detail))for(let B of l)n.setQueriesData(N.action("one").id(B).params(A??{}).get(L),$=>{if(typeof U.detail=="function")return U.detail($,C,B);if(!$)return null;let Q={...$.data,...C};return{...$,data:Q}});return{previousQueries:O,queryKey:H}},onSettled:(y,l,{ids:C,resource:b,dataProviderName:P})=>{let{identifier:M}=s(b);T({resource:M,invalidates:["list","many"],dataProviderName:z(M,P,r)}),C.forEach(v=>T({resource:M,invalidates:["detail"],dataProviderName:z(M,P,r),id:v})),m({type:"REMOVE",payload:{id:C,resource:M}})},onSuccess:(y,{ids:l,resource:C,meta:b,metaData:P,dataProviderName:M,successNotification:v,values:U},k)=>{let{resource:I,identifier:F}=s(C),A=f.singular(F),H=z(F,M,r),N=D({resource:I,meta:S(b,P)}),V=typeof v=="function"?v(y,{ids:l,values:U},F):v;g(V,{key:`${l}-${F}-notification`,description:a("notifications.success","Successful"),message:a("notifications.editSuccess",{resource:a(`${F}.${F}`,F)},`Successfully updated ${A}`),type:"success"}),R==null||R({channel:`resources/${I.name}`,type:"updated",payload:{ids:l.map(String)},date:new Date,meta:{...N,dataProviderName:H}});let O=[];k&&l.forEach(X=>{let j=n.getQueryData(k.queryKey.detail(X));O.push(Object.keys(U||{}).reduce((Z,he)=>{var ve;return Z[he]=(ve=j==null?void 0:j.data)==null?void 0:ve[he],Z},{}))});let{fields:B,operation:$,variables:Q,...K}=N||{};E==null||E.mutate({action:"updateMany",resource:I.name,data:U,previousData:O,meta:{ids:l,dataProviderName:H,...K}})},onError:(y,{ids:l,resource:C,errorNotification:b,values:P},M)=>{let{identifier:v}=s(C);if(M)for(let U of M.previousQueries)n.setQueryData(U[0],U[1]);if(y.message!=="mutationCancelled"){p==null||p(y);let U=f.singular(v),k=typeof b=="function"?b(y,{ids:l,values:P},v):b;g(k,{key:`${l}-${v}-updateMany-error-notification`,message:a("notifications.editError",{resource:U,statusCode:y.statusCode},`Error when updating ${U} (status code: ${y.statusCode})`),description:y.message,type:"error"})}},mutationKey:h().data().mutation("updateMany").get(L),...e,meta:{...e==null?void 0:e.meta,...la("useUpdateMany",L)}}),{elapsedTime:x}=ee({isLoading:w.isLoading,interval:t==null?void 0:t.interval,onInterval:t==null?void 0:t.onInterval});return{...w,overtime:{elapsedTime:x}}},"useUpdateMany");import{getXRay as ga}from"@refinedev/devtools-internal";import{useMutation as Ta,useQueryClient as Ra}from"@tanstack/react-query";var Pa=o(({mutationOptions:e,overtimeOptions:t}={})=>{let r=Y(),{mutate:s}=ae({v3LegacyAuthProviderCompatible:!!(r!=null&&r.isLegacy)}),{mutationMode:n,undoableTimeout:i}=ze(),a=re(),{notificationDispatch:u}=Xe(),d=_(),c=Ve(),p=ie(),m=Ce(),{log:R}=Be(),{resources:g,select:T}=G(),E=Ra(),D=J(),{options:{textTransformers:f}}=oe(),{keys:h,preferLegacyKeys:L}=W(),w=Ta({mutationFn:({resource:y,ids:l,mutationMode:C,undoableTimeout:b,onCancel:P,meta:M,metaData:v,dataProviderName:U,values:k})=>{let{resource:I,identifier:F}=T(y),A=D({resource:I,meta:S(M,v)}),H=C??n,N=b??i,V=a(z(F,U,g)),O=o(()=>V.deleteMany?V.deleteMany({resource:I.name,ids:l,meta:A,metaData:A,variables:k}):Ze(l.map($=>V.deleteOne({resource:I.name,id:$,meta:A,metaData:A,variables:k}))),"mutationFn");return H!=="undoable"?O():new Promise(($,Q)=>{let K=o(()=>{O().then(j=>$(j)).catch(j=>Q(j))},"doMutation"),X=o(()=>{Q({message:"mutationCancelled"})},"cancelMutation");P&&P(X),u({type:"ADD",payload:{id:l,resource:F,cancelMutation:X,doMutation:K,seconds:N,isSilent:!!P}})})},onMutate:async({ids:y,resource:l,mutationMode:C,dataProviderName:b,meta:P,metaData:M})=>{let{identifier:v}=T(l),{gqlMutation:U,gqlQuery:k,...I}=S(P,M)??{},F=Je(L)(v,z(v,b,g),I),A=h().data(z(v,b,g)).resource(v),H=C??n;await E.cancelQueries(A.get(L),void 0,{silent:!0});let N=E.getQueriesData(A.get(L));if(H!=="pessimistic"){E.setQueriesData(A.action("list").params(I??{}).get(L),V=>V?{data:V.data.filter(B=>B.id&&!y.map(String).includes(B.id.toString())),total:V.total-1}:null),E.setQueriesData(A.action("many").get(L),V=>{if(!V)return null;let O=V.data.filter(B=>B.id?!y.map(String).includes(B.id.toString()):!1);return{...V,data:O}});for(let V of y)E.setQueriesData(A.action("one").id(V).params(I).get(L),O=>!O||O.data.id==V?null:{...O})}return{previousQueries:N,queryKey:F}},onSettled:(y,l,{resource:C,ids:b,dataProviderName:P,invalidates:M=["list","many"]})=>{let{identifier:v}=T(C);m({resource:v,dataProviderName:z(v,P,g),invalidates:M}),u({type:"REMOVE",payload:{id:b,resource:v}})},onSuccess:(y,{ids:l,resource:C,meta:b,metaData:P,dataProviderName:M,successNotification:v},U)=>{let{resource:k,identifier:I}=T(C),F=z(I,M,g),A=D({resource:k,meta:S(b,P)});l.forEach($=>E.removeQueries(U==null?void 0:U.queryKey.detail($)));let H=typeof v=="function"?v(y,l,I):v;p(H,{key:`${l}-${I}-notification`,description:d("notifications.success","Success"),message:d("notifications.deleteSuccess",{resource:d(`${I}.${I}`,I)},`Successfully deleted ${I}`),type:"success"}),c==null||c({channel:`resources/${k.name}`,type:"deleted",payload:{ids:l},date:new Date,meta:{...A,dataProviderName:F}});let{fields:N,operation:V,variables:O,...B}=A||{};R==null||R.mutate({action:"deleteMany",resource:k.name,meta:{ids:l,dataProviderName:F,...B}}),l.forEach($=>E.removeQueries(U==null?void 0:U.queryKey.detail($)))},onError:(y,{ids:l,resource:C,errorNotification:b},P)=>{let{identifier:M}=T(C);if(P)for(let v of P.previousQueries)E.setQueryData(v[0],v[1]);if(y.message!=="mutationCancelled"){s(y);let v=f.singular(M),U=typeof b=="function"?b(y,l,M):b;p(U,{key:`${l}-${M}-notification`,message:d("notifications.deleteError",{resource:v,statusCode:y.statusCode},`Error (status code: ${y.statusCode})`),description:y.message,type:"error"})}},mutationKey:h().data().mutation("deleteMany").get(L),...e,meta:{...e==null?void 0:e.meta,...ga("useDeleteMany",L)}}),{elapsedTime:x}=ee({isLoading:w.isLoading,interval:t==null?void 0:t.interval,onInterval:t==null?void 0:t.onInterval});return{...w,overtime:{elapsedTime:x}}},"useDeleteMany");var xa=o(e=>{var n;let t=re(),{resource:r}=G(),{getApiUrl:s}=t(e??((n=S(r==null?void 0:r.meta,r==null?void 0:r.options))==null?void 0:n.dataProviderName));return s()},"useApiUrl");import{useQuery as ha}from"@tanstack/react-query";import{getXRay as Ca}from"@refinedev/devtools-internal";var ba=o(({url:e,method:t,config:r,queryOptions:s,successNotification:n,errorNotification:i,meta:a,metaData:u,dataProviderName:d,overtimeOptions:c})=>{let p=re(),m=Y(),{mutate:R}=ae({v3LegacyAuthProviderCompatible:!!(m!=null&&m.isLegacy)}),g=_(),T=ie(),E=J(),{keys:D,preferLegacyKeys:f}=W(),h=S(a,u),{custom:L}=p(d),w=E({meta:h});if(L){let x=ha({queryKey:D().data(d).mutation("custom").params({method:t,url:e,...r,...h||{}}).get(f),queryFn:({queryKey:l,pageParam:C,signal:b})=>L({url:e,method:t,...r,meta:{...w,queryContext:{queryKey:l,pageParam:C,signal:b}},metaData:{...w,queryContext:{queryKey:l,pageParam:C,signal:b}}}),...s,onSuccess:l=>{var b;(b=s==null?void 0:s.onSuccess)==null||b.call(s,l);let C=typeof n=="function"?n(l,{...r,...w}):n;T(C)},onError:l=>{var b;R(l),(b=s==null?void 0:s.onError)==null||b.call(s,l);let C=typeof i=="function"?i(l,{...r,...w}):i;T(C,{key:`${t}-notification`,message:g("notifications.error",{statusCode:l.statusCode},`Error (status code: ${l.statusCode})`),description:l.message,type:"error"})},meta:{...s==null?void 0:s.meta,...Ca("useCustom",f)}}),{elapsedTime:y}=ee({isLoading:x.isFetching,interval:c==null?void 0:c.interval,onInterval:c==null?void 0:c.onInterval});return{...x,overtime:{elapsedTime:y}}}else throw Error("Not implemented custom on data provider.")},"useCustom");import{useMutation as va}from"@tanstack/react-query";import{getXRay as Da}from"@refinedev/devtools-internal";var La=o(({mutationOptions:e,overtimeOptions:t}={})=>{let r=Y(),{mutate:s}=ae({v3LegacyAuthProviderCompatible:!!(r!=null&&r.isLegacy)}),n=ie(),i=re(),a=_(),u=J(),{keys:d,preferLegacyKeys:c}=W(),p=va(({url:R,method:g,values:T,meta:E,metaData:D,dataProviderName:f,config:h})=>{let L=u({meta:S(E,D)}),{custom:w}=i(f);if(w)return w({url:R,method:g,payload:T,meta:L,metaData:L,headers:{...h==null?void 0:h.headers}});throw Error("Not implemented custom on data provider.")},{onSuccess:(R,{successNotification:g,config:T,meta:E,metaData:D})=>{let f=typeof g=="function"?g(R,{...T,...S(E,D)||{}}):g;n(f)},onError:(R,{errorNotification:g,method:T,config:E,meta:D,metaData:f})=>{s(R);let h=typeof g=="function"?g(R,{...E,...S(D,f)||{}}):g;n(h,{key:`${T}-notification`,message:a("notifications.error",{statusCode:R.statusCode},`Error (status code: ${R.statusCode})`),description:R.message,type:"error"})},mutationKey:d().data().mutation("customMutation").get(c),...e,meta:{...e==null?void 0:e.meta,...Da("useCustomMutation",c)}}),{elapsedTime:m}=ee({isLoading:p.isLoading,interval:t==null?void 0:t.interval,onInterval:t==null?void 0:t.onInterval});return{...p,overtime:{elapsedTime:m}}},"useCustomMutation");import{useCallback as Ua,useContext as Ma}from"react";import gs from"react";var Ea=o(()=>({default:{create:()=>Promise.resolve({data:{id:1}}),createMany:()=>Promise.resolve({data:[]}),deleteOne:()=>Promise.resolve({data:{id:1}}),deleteMany:()=>Promise.resolve({data:[]}),getList:()=>Promise.resolve({data:[],total:0}),getMany:()=>Promise.resolve({data:[]}),getOne:()=>Promise.resolve({data:{id:1}}),update:()=>Promise.resolve({data:{id:1}}),updateMany:()=>Promise.resolve({data:[]}),custom:()=>Promise.resolve({data:{}}),getApiUrl:()=>""}}),"defaultDataProvider"),_t=gs.createContext(Ea()),Ts=o(({children:e,...t})=>{let r;return!t.getList||!t.getOne?r=t:r={default:t},gs.createElement(_t.Provider,{value:r},e)},"DataContextProvider");var re=o(()=>{let e=Ma(_t);return Ua(r=>{if(r){if(!e[r])throw new Error(`"${r}" Data provider not found`);return e[r]}if(e.default)return e.default;throw new Error('There is no "default" data provider. Please pass dataProviderName.')},[e])},"useDataProvider");import{getXRay as Ia}from"@refinedev/devtools-internal";import{useInfiniteQuery as wa}from"@tanstack/react-query";var Sa=o(({resource:e,config:t,filters:r,hasPagination:s,pagination:n,sorters:i,queryOptions:a,successNotification:u,errorNotification:d,meta:c,metaData:p,liveMode:m,onLiveEvent:R,liveParams:g,dataProviderName:T,overtimeOptions:E})=>{let{resources:D,resource:f,identifier:h}=G(e),L=re(),w=_(),x=Y(),{mutate:y}=ae({v3LegacyAuthProviderCompatible:!!(x!=null&&x.isLegacy)}),l=ie(),C=J(),{keys:b,preferLegacyKeys:P}=W(),M=z(h,T,D),v=S(c,p),U=S(r,t==null?void 0:t.filters),k=S(i,t==null?void 0:t.sort),I=S(s,t==null?void 0:t.hasPagination),F=Kt({pagination:n,configPagination:t==null?void 0:t.pagination,hasPagination:I}),A=F.mode==="server",H={meta:v,metaData:v,filters:U,hasPagination:A,pagination:F,sorters:k,config:{...t,sort:k}},N=(a==null?void 0:a.enabled)===void 0||(a==null?void 0:a.enabled)===!0,V=C({resource:f,meta:v}),{getList:O}=L(M);at({resource:h,types:["*"],params:{meta:V,metaData:V,pagination:F,hasPagination:A,sort:k,sorters:k,filters:U,subscriptionType:"useList",...g},channel:`resources/${f.name}`,enabled:N,liveMode:m,onLiveEvent:R,dataProviderName:M,meta:{...V,dataProviderName:T}});let B=wa({queryKey:b().data(M).resource(h).action("infinite").params({...v||{},filters:U,hasPagination:A,...A&&{pagination:F},...i&&{sorters:i},...(t==null?void 0:t.sort)&&{sort:t==null?void 0:t.sort}}).get(P),queryFn:({queryKey:Q,pageParam:K,signal:X})=>{let j={...F,current:K};return O({resource:f.name,pagination:j,hasPagination:A,filters:U,sort:k,sorters:k,meta:{...V,queryContext:{queryKey:Q,pageParam:K,signal:X}},metaData:{...V,queryContext:{queryKey:Q,pageParam:K,signal:X}}}).then(({data:Z,total:he,...ve})=>({data:Z,total:he,pagination:j,...ve}))},getNextPageParam:Q=>mr(Q),getPreviousPageParam:Q=>fr(Q),...a,onSuccess:Q=>{var X;(X=a==null?void 0:a.onSuccess)==null||X.call(a,Q);let K=typeof u=="function"?u(Q,H,h):u;l(K)},onError:Q=>{var X;y(Q),(X=a==null?void 0:a.onError)==null||X.call(a,Q);let K=typeof d=="function"?d(Q,H,h):d;l(K,{key:`${h}-useInfiniteList-notification`,message:w("notifications.error",{statusCode:Q.statusCode},`Error (status code: ${Q.statusCode})`),description:Q.message,type:"error"})},meta:{...a==null?void 0:a.meta,...Ia("useInfiniteList",P)}}),{elapsedTime:$}=ee({isLoading:B.isFetching,interval:E==null?void 0:E.interval,onInterval:E==null?void 0:E.onInterval});return{...B,overtime:{elapsedTime:$}}},"useInfiniteList");import Rs from"react";var qe=Rs.createContext(void 0),Ps=o(({liveProvider:e,children:t})=>Rs.createElement(qe.Provider,{value:e},t),"LiveContextProvider");import{useCallback as Wa}from"react";import{useQueryClient as za}from"@tanstack/react-query";import{useContext as Ha}from"react";import hs from"react";import{useMemo as Fa}from"react";import{useRef as Aa}from"react";import ka from"lodash-es/isEqual";var xs=o(e=>{let t=Aa(e);return ka(t.current,e)||(t.current=e),t.current},"useMemoized");var Ur=o((e,t)=>{let r=xs(t);return Fa(e,r)},"useDeepMemo");var it=hs.createContext({resources:[]}),Cs=o(({resources:e,children:t})=>{let r=Ur(()=>yr(e??[]),[e]);return hs.createElement(it.Provider,{value:{resources:r}},t)},"ResourceContextProvider");import bs from"react";var vs=bs.createContext("new"),Ds=vs.Provider,q=o(()=>bs.useContext(vs),"useRouterType");import Ka from"react";import Qa,{createContext as Va}from"react";var Ls={},et=Va(Ls),Es=o(({children:e,router:t})=>Qa.createElement(et.Provider,{value:t??Ls},e),"RouterBindingsProvider");import Ba,{useContext as Na}from"react";var io=o(()=>{let e=Na(et);return Ba.useMemo(()=>(e==null?void 0:e.parse)??(()=>()=>({})),[e==null?void 0:e.parse])()},"useParse");var ye=o(()=>{let e=io();return Ka.useMemo(()=>e(),[e])},"useParsed");function G(e){let{resources:t}=Ha(it),r=q(),s=ye(),n={resourceName:e&&typeof e!="string"?e.resourceName:e,resourceNameOrRouteName:e&&typeof e!="string"?e.resourceNameOrRouteName:e,recordItemId:e&&typeof e!="string"?e.recordItemId:void 0},i=o((m,R=!0)=>{let T=de(m,t,r==="legacy");if(T)return{resource:T,identifier:T.identifier??T.name};if(R){let E={name:m,identifier:m},D=E.identifier??E.name;return{resource:E,identifier:D}}},"select"),a=Us(),{useParams:u}=ne(),d=u();if(r==="legacy"){let m=n.resourceNameOrRouteName?n.resourceNameOrRouteName:d.resource,R=m?a(m):void 0,g=(n==null?void 0:n.recordItemId)??d.id,T=d.action,E=(n==null?void 0:n.resourceName)??(R==null?void 0:R.name),D=(R==null?void 0:R.identifier)??(R==null?void 0:R.name);return{resources:t,resource:R,resourceName:E,id:g,action:T,select:i,identifier:D}}let c,p=typeof e=="string"?e:n==null?void 0:n.resourceNameOrRouteName;if(p){let m=de(p,t);m?c=m:c={name:p}}else s!=null&&s.resource&&(c=s.resource);return{resources:t,resource:c,resourceName:c==null?void 0:c.name,id:s.id,action:s.action,select:i,identifier:(c==null?void 0:c.identifier)??(c==null?void 0:c.name)}}o(G,"useResource");import{useContext as Ga,useCallback as $a}from"react";var Us=o(()=>{let{resources:e}=Ga(it);return $a(r=>{let s=de(r,e,!0);return s||{name:r,route:r}},[e])},"useResourceWithRoute");var Ce=o(()=>{let{resources:e}=G(),t=za(),{keys:r,preferLegacyKeys:s}=W();return Wa(async({resource:i,dataProviderName:a,invalidates:u,id:d,invalidationFilters:c={type:"all",refetchType:"active"},invalidationOptions:p={cancelRefetch:!1}})=>{if(u===!1)return;let m=z(i,a,e),R=r().data(m).resource(i??"");await Promise.all(u.map(g=>{switch(g){case"all":return t.invalidateQueries(r().data(m).get(s),c,p);case"list":return t.invalidateQueries(R.action("list").get(s),c,p);case"many":return t.invalidateQueries(R.action("many").get(s),c,p);case"resourceAll":return t.invalidateQueries(R.get(s),c,p);case"detail":return t.invalidateQueries(R.action("one").id(d||"").get(s),c,p);default:return}}))},[])},"useInvalidate");import{useContext as Ms,useEffect as _a}from"react";var at=o(({resource:e,params:t,channel:r,types:s,enabled:n=!0,liveMode:i,onLiveEvent:a,dataProviderName:u,meta:d})=>{var f;let{resource:c,identifier:p}=G(e),m=Ms(qe),{liveMode:R,onLiveEvent:g}=Ms(Ue),T=i??R,E=Ce(),D=u??(d==null?void 0:d.dataProviderName)??((f=c==null?void 0:c.meta)==null?void 0:f.dataProviderName);_a(()=>{let h,L=o(w=>{T==="auto"&&E({resource:p,dataProviderName:D,invalidates:["resourceAll"],invalidationFilters:{type:"active",refetchType:"active"},invalidationOptions:{cancelRefetch:!1}}),a==null||a(w),g==null||g(w)},"callback");return T&&T!=="off"&&n&&(h=m==null?void 0:m.subscribe({channel:r,params:{resource:c==null?void 0:c.name,...t},types:s,callback:L,dataProviderName:D,meta:{...d,dataProviderName:D}})),()=>{h&&(m==null||m.unsubscribe(h))}},[n])},"useResourceSubscription");import{useContext as Oa}from"react";var Is=o(e=>{let{liveMode:t}=Oa(Ue);return e??t},"useLiveMode");import{useContext as ja,useEffect as Xa}from"react";var iP=o(({params:e,channel:t,types:r=["*"],enabled:s=!0,onLiveEvent:n,dataProviderName:i="default",meta:a})=>{let u=ja(qe);Xa(()=>{let d;return s&&(d=u==null?void 0:u.subscribe({channel:t,params:e,types:r,callback:n,dataProviderName:i,meta:{...a,dataProviderName:i}})),()=>{d&&(u==null||u.unsubscribe(d))}},[s])},"useSubscription");import{useContext as Ya}from"react";var Ve=o(()=>{let e=Ya(qe);return e==null?void 0:e.publish},"usePublish");import{useContext as Ja}from"react";var Xe=o(()=>{let{notifications:e,notificationDispatch:t}=Ja(Lr);return{notifications:e,notificationDispatch:t}},"useCancelNotification");import{useContext as ei}from"react";import Za,{createContext as qa}from"react";var Ot=qa({}),ws=o(({open:e,close:t,children:r})=>Za.createElement(Ot.Provider,{value:{open:e,close:t}},r),"NotificationContextProvider");var Ie=o(()=>{let{open:e,close:t}=ei(Ot);return{open:e,close:t}},"useNotification");import{useCallback as ti}from"react";var ie=o(()=>{let{open:e}=Ie();return ti((r,s)=>{r!==!1&&(r?e==null||e(r):s&&(e==null||e(s)))},[])},"useHandleNotification");import{useCallback as ri,useContext as oi}from"react";import Ss from"react";var Ne=Ss.createContext({}),As=o(({children:e,i18nProvider:t})=>Ss.createElement(Ne.Provider,{value:{i18nProvider:t}},e),"TranslationContextProvider");var si=o(()=>{let{i18nProvider:e}=oi(Ne);return ri(t=>e==null?void 0:e.changeLocale(t),[])},"useSetLocale");import{useContext as ni,useMemo as ai}from"react";var _=o(()=>{let{i18nProvider:e}=ni(Ne);return ai(()=>{function r(s,n,i){return(e==null?void 0:e.translate(s,n,i))??i??(typeof n=="string"&&typeof i>"u"?n:s)}return o(r,"translate"),r},[e])},"useTranslate");import{useContext as ii,useCallback as ui}from"react";var ci=o(()=>{let{i18nProvider:e}=ii(Ne);return ui(()=>e==null?void 0:e.getLocale(),[])},"useGetLocale");import{useState as di}from"react";import{ExportToCsv as pi}from"export-to-csv-fix-source-map";var qP=o(({resourceName:e,resource:t,sorter:r,sorters:s,filters:n,maxItemCount:i,pageSize:a=20,mapData:u=o(g=>g,"mapData"),exportOptions:d,meta:c,metaData:p,dataProviderName:m,onError:R}={})=>{let[g,T]=di(!1),E=re(),D=J(),{resource:f,resources:h,identifier:L}=G(S(t,e)),x=`${Dt()(L,"plural")}-${new Date().toLocaleString()}`,{getList:y}=E(z(L,m,h)),l=D({resource:f,meta:S(c,p)});return{isLoading:g,triggerExport:o(async()=>{T(!0);let b=[],P=1,M=!0;for(;M;)try{let{data:U,total:k}=await y({resource:(f==null?void 0:f.name)??"",filters:n,sort:S(s,r),sorters:S(s,r),pagination:{current:P,pageSize:a,mode:"server"},meta:l,metaData:l});P++,b.push(...U),i&&b.length>=i&&(b=b.slice(0,i),M=!1),k===b.length&&(M=!1)}catch(U){T(!1),M=!1,R==null||R(U);return}new pi({filename:x,useKeysAsHeaders:!0,...d}).generateCsv(b.map(u)),T(!1)},"triggerExport")}},"useExport");import uo from"react";import li from"warn-once";import mi from"lodash-es/debounce";var fx=o(({resource:e,action:t,id:r,onMutationSuccess:s,onMutationError:n,redirect:i,successNotification:a,errorNotification:u,meta:d,metaData:c,queryMeta:p,mutationMeta:m,mutationMode:R,liveMode:g,onLiveEvent:T,liveParams:E,undoableTimeout:D,dataProviderName:f,invalidates:h,queryOptions:L,createMutationOptions:w,updateMutationOptions:x,overtimeOptions:y,autoSave:l,optimisticUpdateMap:C}={})=>{let b=Ce(),{options:P}=oe(),M=J(),{resource:v,id:U,action:k,identifier:I}=G(e),{identifier:F}=G(),H=o(()=>{let fe=r??U;return e&&e!==F?r:fe},"getDefaultId")(),[N,V]=uo.useState(H);uo.useEffect(()=>{V(H)},[H]);let B=o(()=>t||(k==="edit"||k==="clone"?k:"create"),"getAction")(),$=M({resource:v,meta:S(d,c)}),{mutationMode:Q}=ze(),K=R??Q,X=B==="create",j=B==="edit",Z=B==="clone";li((Z||j)&&!!e&&!r&&(L==null?void 0:L.enabled)!==!1,`[useForm]: action: "${B}", resource: "${I}", id: ${N} 

If you don't use the \`setId\` method to set the \`id\`, you should pass the \`id\` prop to \`useForm\`. Otherwise, \`useForm\` will not be able to infer the \`id\` from the current URL. 

See https://refine.dev/docs/api-reference/core/hooks/useForm/#resource`);let he=Gr({redirectFromProps:i,action:B,redirectOptions:P.redirect}),St=Wt({resource:I,id:N??"",queryOptions:{enabled:N!==void 0&&(j||Z),...L},liveMode:g,onLiveEvent:T,liveParams:E,meta:{...$,...p},metaData:{...$,...p},dataProviderName:f}),{isFetching:ct}=St,dt=zt({mutationOptions:w}),{mutate:Tt,isLoading:Rt}=dt,Pt=Er({mutationOptions:x}),{mutate:Yt,isLoading:Fr}=Pt,Oe=Er({}),{setWarnWhen:At}=Ht(),Ge=ks(),Jt=o(async fe=>{At(!1);let Fe=o(Se=>{Ge({redirect:he,resource:v,id:Se,meta:S(d,c)})},"onSuccess");return K!=="pessimistic"&&setTimeout(()=>{Fe()}),new Promise((Se,ot)=>{if(K!=="pessimistic"&&Se(),!!v)return Tt({values:fe,resource:I??v.name,successNotification:a,errorNotification:u,meta:{...$,...m},metaData:{...$,...m},dataProviderName:f,invalidates:h},{onSuccess:(De,st,nt)=>{var Ft;s&&s(De,fe,nt);let lt=(Ft=De==null?void 0:De.data)==null?void 0:Ft.id;Fe(lt),Se(De)},onError:(De,st,nt)=>{if(n)return n(De,fe,nt);ot()}})})},"onFinishCreate");uo.useEffect(()=>()=>{l!=null&&l.invalidateOnUnmount&&Oe.status==="success"&&b({id:N,invalidates:h||["list","many","detail"],dataProviderName:f,resource:I})},[l==null?void 0:l.invalidateOnUnmount,Oe.status]);let pt=o(fe=>{if(!v||!j)return;let Fe={id:N??"",values:fe,resource:I??v.name,successNotification:!1,errorNotification:!1,meta:{...$,...m},metaData:{...$,...m},dataProviderName:f,invalidates:[],mutationMode:"pessimistic"};return Oe.mutate(Fe,{onSuccess:(Se,ot,De)=>{s&&s(Se,fe,De,!0)},onError:(Se,ot,De)=>{if(n)return n(Se,fe,De,!0)}})},"onFinishAutoSaveMutation"),xt=mi(fe=>pt(fe),(l==null?void 0:l.debounce)||1e3),kt=X||Z?{formLoading:ct||Rt,mutationResult:dt,onFinish:Jt}:{formLoading:ct||Fr,mutationResult:Pt,onFinish:o(async fe=>{if(At(!1),!v)return;let Fe={id:N??"",values:fe,resource:I??v.name,mutationMode:K,undoableTimeout:D,successNotification:a,errorNotification:u,meta:{...$,...m},metaData:{...$,...m},dataProviderName:f,invalidates:h,optimisticUpdateMap:C},Se=o(()=>{Ge({redirect:he,resource:v,id:N,meta:S(d,c)})},"onSuccess");return K!=="pessimistic"&&setTimeout(()=>{Se()}),new Promise((ot,De)=>(K!=="pessimistic"&&ot(),setTimeout(()=>{Yt(Fe,{onSuccess:(st,nt,lt)=>{s&&s(st,fe,lt),K==="pessimistic"&&Se(),ot(st)},onError:(st,nt,lt)=>{if(n)return n(st,fe,lt);De()}})})))},"onFinishUpdate")},{elapsedTime:Vr}=ee({isLoading:kt.mutationResult.isLoading||St.isFetching,interval:y==null?void 0:y.interval,onInterval:y==null?void 0:y.onInterval});return{...kt,queryResult:St,onFinishAutoSave:xt,autoSaveProps:{status:Oe.status,data:Oe.data,error:Oe.error},id:N,setId:V,redirect:(fe,Fe)=>{Ge({redirect:fe!==void 0?fe:j?"list":"edit",resource:v,id:Fe??N,meta:S(d,c)})},overtime:{elapsedTime:Vr}}},"useForm");import{useCallback as fi}from"react";var ks=o(()=>{let{show:e,edit:t,list:r,create:s}=le();return fi(({redirect:i,resource:a,id:u,meta:d={}})=>{if(i&&a)return a.show&&i==="show"&&u?e(a,u,void 0,d):a.edit&&i==="edit"&&u?t(a,u,void 0,d):a.create&&i==="create"?s(a,void 0,d):r(a,"push",d)},[])},"useRedirectionAfterSubmission");import gi,{useCallback as Ti,useContext as Ri}from"react";import yi from"react";var mt=o(()=>{let e=q(),{resource:t,resources:r}=G(),s=ye();return yi.useCallback(({resource:i,action:a,meta:u})=>{var R;let d=i||t;if(!d)return;let p=(R=Pe(d,r,e==="legacy").find(g=>g.action===a))==null?void 0:R.route;return p?Me(p,d==null?void 0:d.meta,s,u):void 0},[r,t,s])},"useGetToPath");var me=o(()=>{let e=Ri(et),{select:t}=G(),r=mt(),n=gi.useMemo(()=>(e==null?void 0:e.go)??(()=>()=>{}),[e==null?void 0:e.go])();return Ti(a=>{if(typeof a.to!="object")return n({...a,to:a.to});let{resource:u}=t(a.to.resource);Pi(a.to,u);let d=r({resource:u,action:a.to.action,meta:{id:a.to.id,...a.to.meta}});return n({...a,to:d})},[t,n])},"useGo"),Pi=o((e,t)=>{if(!(e!=null&&e.action)||!(e!=null&&e.resource))throw new Error('[useGo]: "action" or "resource" is required.');if(["edit","show","clone"].includes(e==null?void 0:e.action)&&!e.id)throw new Error(`[useGo]: [action: ${e.action}] requires an "id" for resource [resource: ${e.resource}]`);if(!t[e.action])throw new Error(`[useGo]: [action: ${e.action}] is not defined for [resource: ${e.resource}]`)},"handleResourceErrors");import xi,{useContext as hi}from"react";var co=o(()=>{let e=hi(et);return xi.useMemo(()=>(e==null?void 0:e.back)??(()=>()=>{}),[e==null?void 0:e.back])()},"useBack");var le=o(()=>{let{resources:e}=G(),t=q(),{useHistory:r}=ne(),s=r(),n=ye(),i=me(),a=co(),u=o((x,y="push")=>{t==="legacy"?s[y](x):i({to:x,type:y})},"handleUrl"),d=o((x,y={})=>{var l;if(t==="legacy"){let C=typeof x=="string"?de(x,e,!0)??{name:x,route:x}:x,b=Pe(C,e,!0).find(P=>P.action==="create");return b?Me(b.route,C==null?void 0:C.meta,n,y):""}else{let C=typeof x=="string"?de(x,e)??{name:x}:x,b=(l=Pe(C,e).find(P=>P.action==="create"))==null?void 0:l.route;return b?i({to:Me(b,C==null?void 0:C.meta,n,y),type:"path"}):""}},"createUrl"),c=o((x,y,l={})=>{var b;let C=encodeURIComponent(y);if(t==="legacy"){let P=typeof x=="string"?de(x,e,!0)??{name:x,route:x}:x,M=Pe(P,e,!0).find(v=>v.action==="edit");return M?Me(M.route,P==null?void 0:P.meta,n,{...l,id:C}):""}else{let P=typeof x=="string"?de(x,e)??{name:x}:x,M=(b=Pe(P,e).find(v=>v.action==="edit"))==null?void 0:b.route;return M?i({to:Me(M,P==null?void 0:P.meta,n,{...l,id:C}),type:"path"}):""}},"editUrl"),p=o((x,y,l={})=>{var b;let C=encodeURIComponent(y);if(t==="legacy"){let P=typeof x=="string"?de(x,e,!0)??{name:x,route:x}:x,M=Pe(P,e,!0).find(v=>v.action==="clone");return M?Me(M.route,P==null?void 0:P.meta,n,{...l,id:C}):""}else{let P=typeof x=="string"?de(x,e)??{name:x}:x,M=(b=Pe(P,e).find(v=>v.action==="clone"))==null?void 0:b.route;return M?i({to:Me(M,P==null?void 0:P.meta,n,{...l,id:C}),type:"path"}):""}},"cloneUrl"),m=o((x,y,l={})=>{var b;let C=encodeURIComponent(y);if(t==="legacy"){let P=typeof x=="string"?de(x,e,!0)??{name:x,route:x}:x,M=Pe(P,e,!0).find(v=>v.action==="show");return M?Me(M.route,P==null?void 0:P.meta,n,{...l,id:C}):""}else{let P=typeof x=="string"?de(x,e)??{name:x}:x,M=(b=Pe(P,e).find(v=>v.action==="show"))==null?void 0:b.route;return M?i({to:Me(M,P==null?void 0:P.meta,n,{...l,id:C}),type:"path"}):""}},"showUrl"),R=o((x,y={})=>{var l;if(t==="legacy"){let C=typeof x=="string"?de(x,e,!0)??{name:x,route:x}:x,b=Pe(C,e,!0).find(P=>P.action==="list");return b?Me(b.route,C==null?void 0:C.meta,n,y):""}else{let C=typeof x=="string"?de(x,e)??{name:x}:x,b=(l=Pe(C,e).find(P=>P.action==="list"))==null?void 0:l.route;return b?i({to:Me(b,C==null?void 0:C.meta,n,y),type:"path"}):""}},"listUrl");return{create:o((x,y="push",l={})=>{u(d(x,l),y)},"create"),createUrl:d,edit:o((x,y,l="push",C={})=>{u(c(x,y,C),l)},"edit"),editUrl:c,clone:o((x,y,l="push",C={})=>{u(p(x,y,C),l)},"clone"),cloneUrl:p,show:o((x,y,l="push",C={})=>{u(m(x,y,C),l)},"show"),showUrl:m,list:o((x,y="push",l={})=>{u(R(x,l),y)},"list"),listUrl:R,push:o((x,...y)=>{t==="legacy"?s.push(x,...y):i({to:x,type:"push"})},"push"),replace:o((x,...y)=>{t==="legacy"?s.replace(x,...y):i({to:x,type:"replace"})},"replace"),goBack:o(()=>{t==="legacy"?s.goBack():a()},"goBack")}},"useNavigation");import Ci,{useState as bi}from"react";import vi from"warn-once";var oh=o(({resource:e,id:t,successNotification:r,errorNotification:s,meta:n,metaData:i,liveMode:a,onLiveEvent:u,dataProviderName:d,queryOptions:c,overtimeOptions:p}={})=>{let{resource:m,id:R,identifier:g}=G(e),{identifier:T}=G(),E=J(),f=o(()=>{let l=t??R;return e&&e!==T?t:l},"getDefaultId")(),[h,L]=bi(f);Ci.useEffect(()=>{L(f)},[f]);let w=E({resource:m,meta:S(n,i)});vi(!!e&&!t,`[useShow]: resource: "${g}", id: ${t} 

If you don't use the \`setShowId\` method to set the \`showId\`, you should pass the \`id\` prop to \`useShow\`. Otherwise, \`useShow\` will not be able to infer the \`id\` from the current URL. 

See https://refine.dev/docs/api-reference/core/hooks/show/useShow/#resource`);let x=Wt({resource:g,id:h??"",queryOptions:{enabled:h!==void 0,...c},successNotification:r,errorNotification:s,meta:w,metaData:w,liveMode:a,onLiveEvent:u,dataProviderName:d}),{elapsedTime:y}=ee({isLoading:x.isFetching,interval:p==null?void 0:p.interval,onInterval:p==null?void 0:p.onInterval});return{queryResult:x,showId:h,setShowId:L,overtime:{elapsedTime:y}}},"useShow");import{useEffect as Di,useState as po}from"react";import{parse as Li}from"papaparse";import Ei from"lodash-es/chunk";var lh=o(({resourceName:e,resource:t,mapData:r=o(p=>p,"mapData"),paparseOptions:s,batchSize:n=Number.MAX_SAFE_INTEGER,onFinish:i,meta:a,metaData:u,onProgress:d,dataProviderName:c}={})=>{let[p,m]=po(0),[R,g]=po(0),[T,E]=po(!1),{resource:D,identifier:f}=G(t??e),h=J(),L=ao(),w=zt(),x=h({resource:D,meta:S(a,u)}),y;n===1?y=w:y=L;let l=o(()=>{g(0),m(0),E(!1)},"handleCleanup"),C=o(P=>{let M={succeeded:P.filter(v=>v.type==="success"),errored:P.filter(v=>v.type==="error")};i==null||i(M),E(!1)},"handleFinish");Di(()=>{d==null||d({totalAmount:R,processedAmount:p})},[R,p]);let b=o(({file:P})=>(l(),new Promise(M=>{E(!0),Li(P,{complete:async({data:v})=>{let U=er(v,r);if(g(U.length),n===1){let k=U.map(F=>o(async()=>({response:await w.mutateAsync({resource:f??"",values:F,successNotification:!1,errorNotification:!1,dataProviderName:c,meta:x,metaData:x}),value:F}),"fn")),I=await lr(k,({response:F,value:A})=>(m(H=>H+1),{response:[F.data],type:"success",request:[A]}),(F,A)=>({response:[F],type:"error",request:[U[A]]}));M(I)}else{let k=Ei(U,n),I=k.map(A=>o(async()=>({response:await L.mutateAsync({resource:f??"",values:A,successNotification:!1,errorNotification:!1,dataProviderName:c,meta:x,metaData:x}),value:A,currentBatchLength:A.length}),"fn")),F=await lr(I,({response:A,currentBatchLength:H,value:N})=>(m(V=>V+H),{response:A.data,type:"success",request:N}),(A,H)=>({response:[A],type:"error",request:k[H]}));M(F)}},...s})}).then(M=>(C(M),M))),"handleChange");return{inputProps:{type:"file",accept:".csv",onChange:P=>{P.target.files&&P.target.files.length>0&&b({file:P.target.files[0]})}},mutationResult:y,isLoading:T,handleChange:b}},"useImport");import{useCallback as Fs,useState as Ui}from"react";var gh=o(({defaultVisible:e=!1}={})=>{let[t,r]=Ui(e),s=Fs(()=>r(!0),[t]),n=Fs(()=>r(!1),[t]);return{visible:t,show:s,close:n}},"useModal");var Mi=o(({resource:e,action:t,meta:r,legacy:s})=>mt()({resource:e,action:t,meta:r,legacy:s}),"useToPath");import Ii,{useContext as wi}from"react";var ft=o(()=>{let e=wi(et);return e!=null&&e.Link?e.Link:o(({to:r,...s})=>Ii.createElement("a",{href:r,...s}),"FallbackLink")},"useLink");import{useContext as Ai}from"react";import Qs from"react";var tt={useHistory:()=>!1,useLocation:()=>!1,useParams:()=>({}),Prompt:()=>null,Link:()=>null},Si=Qs.createContext(tt),jt=Si,Vs=o(({children:e,useHistory:t,useLocation:r,useParams:s,Prompt:n,Link:i,routes:a})=>Qs.createElement(jt.Provider,{value:{useHistory:t??tt.useHistory,useLocation:r??tt.useLocation,useParams:s??tt.useParams,Prompt:n??tt.Prompt,Link:i??tt.Link,routes:a??tt.routes}},e),"LegacyRouterContextProvider");var ne=o(()=>{let e=Ai(jt),{useHistory:t,useLocation:r,useParams:s,Prompt:n,Link:i,routes:a}=e??tt;return{useHistory:t,useLocation:r,useParams:s,Prompt:n,Link:i,routes:a}},"useRouterContext");import{useQuery as ki}from"@tanstack/react-query";import{useContext as Fi}from"react";import Bs from"react";var ut=Bs.createContext({options:{buttons:{enableAccessControl:!0,hideIfUnauthorized:!1}}});var Ns=o(({can:e,children:t,options:r})=>Bs.createElement(ut.Provider,{value:{can:e,options:r?{...r,buttons:{enableAccessControl:!0,hideIfUnauthorized:!1,...r.buttons}}:{buttons:{enableAccessControl:!0,hideIfUnauthorized:!1}}}},t),"AccessControlContextProvider");var Ut=o(e=>{if(!e)return;let{icon:t,list:r,edit:s,create:n,show:i,clone:a,children:u,meta:d,options:c,...p}=e,{icon:m,...R}=d??{},{icon:g,...T}=c??{};return{...p,...d?{meta:R}:{},...c?{options:T}:{}}},"sanitizeResource");import{getXRay as Qi}from"@refinedev/devtools-internal";var Ks=o(({action:e,resource:t,params:r,queryOptions:s})=>{let{can:n}=Fi(ut),{keys:i,preferLegacyKeys:a}=W(),{resource:u,...d}=r??{},c=Ut(u),p=ki({queryKey:i().access().resource(t).action(e).params({params:{...d,resource:c},enabled:s==null?void 0:s.enabled}).get(a),queryFn:()=>(n==null?void 0:n({action:e,resource:t,params:{...d,resource:c}}))??Promise.resolve({can:!0}),enabled:typeof n<"u",...s,meta:{...s==null?void 0:s.meta,...Qi("useCan",a)},retry:!1});return typeof n>"u"?{data:{can:!0}}:p},"useCan");import Hs from"react";var nC=o(()=>{let{can:e}=Hs.useContext(ut);return{can:Hs.useMemo(()=>e?o(async({params:s,...n})=>{let i=s!=null&&s.resource?Ut(s.resource):void 0;return e({...n,...s?{params:{...s,resource:i}}:{}})},"canWithSanitizedResource"):void 0,[e])}},"useCanWithoutCache");import{useCallback as Gs,useMemo as Vi,useState as lo}from"react";import Bi from"lodash-es/uniqBy";import Ni from"lodash-es/debounce";import Mr from"lodash-es/get";var RC=o(e=>{let[t,r]=lo([]),[s,n]=lo([]),[i,a]=lo([]),{resource:u,sort:d,sorters:c,filters:p=[],optionLabel:m="title",optionValue:R="id",debounce:g=300,successNotification:T,errorNotification:E,defaultValueQueryOptions:D,queryOptions:f,fetchSize:h,pagination:L,hasPagination:w=!1,liveMode:x,defaultValue:y=[],onLiveEvent:l,onSearch:C,liveParams:b,meta:P,metaData:M,dataProviderName:v,overtimeOptions:U}=e,{resource:k,identifier:I}=G(u),A=J()({resource:k,meta:S(P,M)}),H=Array.isArray(y)?y:[y],N=Gs(j=>{a(j.data.map(Z=>({label:Mr(Z,m),value:Mr(Z,R)})))},[m,R]),V=D??f,O=ro({resource:I,ids:H,queryOptions:{...V,enabled:H.length>0&&((V==null?void 0:V.enabled)??!0),onSuccess:j=>{var Z;N(j),(Z=V==null?void 0:V.onSuccess)==null||Z.call(V,j)}},meta:A,metaData:A,liveMode:"off",dataProviderName:v}),B=Gs(j=>{n(j.data.map(Z=>({label:Mr(Z,m),value:Mr(Z,R)})))},[m,R]),$=$t({resource:I,sorters:S(c,d),filters:p.concat(t),pagination:{current:L==null?void 0:L.current,pageSize:(L==null?void 0:L.pageSize)??h,mode:L==null?void 0:L.mode},hasPagination:w,queryOptions:{...f,onSuccess:j=>{var Z;B(j),(Z=f==null?void 0:f.onSuccess)==null||Z.call(f,j)}},successNotification:T,errorNotification:E,meta:A,metaData:A,liveMode:x,liveParams:b,onLiveEvent:l,dataProviderName:v}),Q=o(j=>{if(C){r(C(j));return}if(j)r([{field:m,operator:"contains",value:j}]);else{r([]);return}},"onSearch"),{elapsedTime:K}=ee({isLoading:$.isFetching||O.isFetching,interval:U==null?void 0:U.interval,onInterval:U==null?void 0:U.onInterval}),X=Vi(()=>Bi([...s,...i],"value"),[s,i]);return{queryResult:$,defaultValueQueryResult:O,options:X,onSearch:Ni(Q,g),overtime:{elapsedTime:K}}},"useSelect");import Ki,{useState as Ir,useEffect as $s}from"react";import Ws from"qs";import wr from"lodash-es/differenceWith";import Sr from"lodash-es/isEqual";import Hi from"warn-once";var zs=[],_s=[];function AC({initialCurrent:e,initialPageSize:t,hasPagination:r=!0,pagination:s,initialSorter:n,permanentSorter:i=_s,defaultSetFilterBehavior:a,initialFilter:u,permanentFilter:d=zs,filters:c,sorters:p,syncWithLocation:m,resource:R,successNotification:g,errorNotification:T,queryOptions:E,liveMode:D,onLiveEvent:f,liveParams:h,meta:L,metaData:w,dataProviderName:x,overtimeOptions:y}={}){var Ft,Ro,Po,xo,ho;let{syncWithLocation:l}=Wr(),C=m??l,b=Is(D),P=q(),{useLocation:M}=ne(),{search:v,pathname:U}=M(),k=J(),I=ye(),F=((c==null?void 0:c.mode)||"server")==="server",A=((p==null?void 0:p.mode)||"server")==="server",H=r===!1?"off":"server",N=((s==null?void 0:s.mode)??H)!=="off",V=S(s==null?void 0:s.current,e),O=S(s==null?void 0:s.pageSize,t),B=S(L,w),{parsedCurrent:$,parsedPageSize:Q,parsedSorter:K,parsedFilters:X}=Pr(v??"?"),j=S(c==null?void 0:c.initial,u),Z=S(c==null?void 0:c.permanent,d)??zs,he=S(p==null?void 0:p.initial,n),ve=S(p==null?void 0:p.permanent,i)??_s,St=S(c==null?void 0:c.defaultBehavior,a)??"merge",ct,dt,Tt,Rt;C?(ct=((Ft=I==null?void 0:I.params)==null?void 0:Ft.current)||$||V||1,dt=((Ro=I==null?void 0:I.params)==null?void 0:Ro.pageSize)||Q||O||10,Tt=((Po=I==null?void 0:I.params)==null?void 0:Po.sorters)||(K.length?K:he),Rt=((xo=I==null?void 0:I.params)==null?void 0:xo.filters)||(X.length?X:j)):(ct=V||1,dt=O||10,Tt=he,Rt=j);let{replace:Pt}=le(),Yt=me(),{resource:Fr,identifier:Oe}=G(R),At=k({resource:Fr,meta:B});Ki.useEffect(()=>{Hi(typeof Oe>"u","useTable: `resource` is not defined.")},[Oe]);let[Ge,Jt]=Ir(br(ve,Tt??[])),[pt,xt]=Ir(Cr(Z,Rt??[])),[ht,Qr]=Ir(ct),[rt,kt]=Ir(dt),Vr=o(({pagination:{current:Re,pageSize:Qe},sorter:Zt,filters:qt})=>{if(P==="new")return Yt({type:"path",options:{keepHash:!0,keepQuery:!0},query:{...N?{current:Re,pageSize:Qe}:{},sorters:Zt,filters:qt,...fe()}})??"";{let Qt=Ws.parse(v==null?void 0:v.substring(1)),Tn=xr({pagination:{pageSize:Qe,current:Re},sorters:Ge??Zt,filters:qt,...Qt});return`${U??""}?${Tn??""}`}},"createLinkForSyncWithLocation");$s(()=>{v===""&&(Qr(ct),kt(dt),Jt(br(ve,Tt??[])),xt(Cr(Z,Rt??[])))},[v]);let fe=o(()=>{if(P==="new"){let{sorters:Re,filters:Qe,pageSize:Zt,current:qt,...Qt}=(I==null?void 0:I.params)??{};return Qt}else{let{sorter:Re,filters:Qe,pageSize:Zt,current:qt,...Qt}=Ws.parse(v,{ignoreQueryPrefix:!0});return Qt}},"currentQueryParams");$s(()=>{if(C){let Re=fe();if(P==="new")Yt({type:"replace",options:{keepQuery:!0},query:{...N?{pageSize:rt,current:ht}:{},sorters:wr(Ge,ve,Sr),filters:wr(pt,Z,Sr)}});else{let Qe=xr({...N?{pagination:{pageSize:rt,current:ht}}:{},sorters:wr(Ge,ve,Sr),filters:wr(pt,Z,Sr),...Re});return Pt==null?void 0:Pt(`${U}?${Qe}`,void 0,{shallow:!0})}}},[C,ht,rt,Ge,pt]);let Fe=$t({resource:Oe,hasPagination:r,pagination:{current:ht,pageSize:rt,mode:s==null?void 0:s.mode},filters:F?Lt(Z,pt):void 0,sorters:A?hr(ve,Ge):void 0,queryOptions:E,successNotification:g,errorNotification:T,meta:At,metaData:At,liveMode:b,liveParams:h,onLiveEvent:f,dataProviderName:x}),Se=o(Re=>{xt(Qe=>Lt(Z,Re,Qe))},"setFiltersAsMerge"),ot=o(Re=>{xt(Lt(Z,Re))},"setFiltersAsReplace"),De=o(Re=>{xt(Qe=>Lt(Z,Re(Qe)))},"setFiltersWithSetter"),st=o((Re,Qe=St)=>{typeof Re=="function"?De(Re):Qe==="replace"?ot(Re):Se(Re)},"setFiltersFn"),nt=o(Re=>{Jt(()=>hr(ve,Re))},"setSortWithUnion"),{elapsedTime:lt}=ee({isLoading:Fe.isFetching,interval:y==null?void 0:y.interval,onInterval:y==null?void 0:y.onInterval});return{tableQueryResult:Fe,sorters:Ge,setSorters:nt,sorter:Ge,setSorter:nt,filters:pt,setFilters:st,current:ht,setCurrent:Qr,pageSize:rt,setPageSize:kt,pageCount:rt?Math.ceil((((ho=Fe.data)==null?void 0:ho.total)??0)/rt):1,createLinkForSyncWithLocation:Vr,overtime:{elapsedTime:lt}}}o(AC,"useTable");import{useContext as Xs}from"react";import{useMutation as Ys,useQueryClient as Gi}from"@tanstack/react-query";import Os from"react";var yt=Os.createContext({}),js=o(({create:e,get:t,update:r,children:s})=>Os.createElement(yt.Provider,{value:{create:e,get:t,update:r}},s),"AuditLogContextProvider");import{getXRay as Js}from"@refinedev/devtools-internal";var Be=o(({logMutationOptions:e,renameMutationOptions:t}={})=>{let r=Gi(),s=Xs(yt),{keys:n,preferLegacyKeys:i}=W(),a=Y(),{resources:u}=Xs(it),{data:d,refetch:c,isLoading:p}=_r({v3LegacyAuthProviderCompatible:!!(a!=null&&a.isLegacy),queryOptions:{enabled:!!(s!=null&&s.create)}}),m=Ys(async g=>{var f,h,L,w,x;let T=de(g.resource,u),E=S((f=T==null?void 0:T.meta)==null?void 0:f.audit,(h=T==null?void 0:T.options)==null?void 0:h.audit,(w=(L=T==null?void 0:T.options)==null?void 0:L.auditLog)==null?void 0:w.permissions);if(E&&!Br(E,g.action))return;let D;return p&&(s!=null&&s.create)&&(D=await c()),await((x=s.create)==null?void 0:x.call(s,{...g,author:d??(D==null?void 0:D.data)}))},{mutationKey:n().audit().action("log").get(),...e,meta:{...e==null?void 0:e.meta,...Js("useLog",i)}}),R=Ys(async g=>{var T;return await((T=s.update)==null?void 0:T.call(s,g))},{onSuccess:g=>{g!=null&&g.resource&&r.invalidateQueries(n().audit().resource((g==null?void 0:g.resource)??"").action("list").get(i))},mutationKey:n().audit().action("rename").get(),...t,meta:{...t==null?void 0:t.meta,...Js("useLog",i)}});return{log:m,rename:R}},"useLog");import{useContext as $i}from"react";import{useQuery as Wi}from"@tanstack/react-query";import{getXRay as zi}from"@refinedev/devtools-internal";var ab=o(({resource:e,action:t,meta:r,author:s,metaData:n,queryOptions:i})=>{let{get:a}=$i(yt),{keys:u,preferLegacyKeys:d}=W();return Wi({queryKey:u().audit().resource(e).action("list").params(r).get(d),queryFn:()=>(a==null?void 0:a({resource:e,action:t,author:s,meta:r,metaData:n}))??Promise.resolve([]),enabled:typeof a<"u",...i,retry:!1,meta:{...i==null?void 0:i.meta,...zi("useLogList",d)}})},"useLogList");import{useContext as _i}from"react";import Oi from"warn-once";var xb=o(({meta:e={}}={})=>{let t=q(),{i18nProvider:r}=_i(Ne),s=ye(),n=_(),{resources:i,resource:a,action:u}=G(),{options:{textTransformers:d}}=oe(),c=[];if(!(a!=null&&a.name))return{breadcrumbs:c};let p=o(m=>{var g,T,E,D,f,h;let R=typeof m=="string"?de(m,i,t==="legacy")??{name:m}:m;if(R){let L=S((g=R==null?void 0:R.meta)==null?void 0:g.parent,R==null?void 0:R.parentName);L&&p(L);let w=Pe(R,i,t==="legacy").find(l=>l.action==="list"),x=(T=w==null?void 0:w.resource)!=null&&T.list?w==null?void 0:w.route:void 0,y=x?t==="legacy"?x:Me(x,R==null?void 0:R.meta,s,e):void 0;c.push({label:S((E=R.meta)==null?void 0:E.label,(D=R.options)==null?void 0:D.label)??n(`${R.name}.${R.name}`,d.humanize(R.name)),href:y,icon:S((f=R.meta)==null?void 0:f.icon,(h=R.options)==null?void 0:h.icon,R.icon)})}},"addBreadcrumb");if(p(a),u&&u!=="list"){let m=`actions.${u}`,R=n(m);typeof r<"u"&&R===m?(Oi(!0,`[useBreadcrumb]: Breadcrumb missing translate key for the "${u}" action. Please add "actions.${u}" key to your translation file.
For more information, see https://refine.dev/docs/api-reference/core/hooks/useBreadcrumb/#i18n-support`),c.push({label:n(`buttons.${u}`,d.humanize(u))})):c.push({label:n(m,d.humanize(u))})}return{breadcrumbs:c}},"useBreadcrumb");import mo from"react";var Mt=o((e,t,r=!1)=>{let s=[],n=Ae(e,t);for(;n;)s.push(n),n=Ae(n,t);return s.reverse(),`/${[...s,e].map(a=>xe((r?a.route:void 0)??a.identifier??a.name)).join("/").replace(/^\//,"")}`},"createResourceKey");var Zs=o((e,t=!1)=>{let r={item:{name:"__root__"},children:{}};e.forEach(n=>{let i=[],a=Ae(n,e);for(;a;)i.push(a),a=Ae(a,e);i.reverse();let u=r;i.forEach(c=>{let p=(t?c.route:void 0)??c.identifier??c.name;u.children[p]||(u.children[p]={item:c,children:{}}),u=u.children[p]});let d=(t?n.route:void 0)??n.identifier??n.name;u.children[d]||(u.children[d]={item:n,children:{}})});let s=o(n=>{let i=[];return Object.keys(n.children).forEach(a=>{let u=Mt(n.children[a].item,e,t),d={...n.children[a].item,key:u,children:s(n.children[a])};i.push(d)}),i},"flatten");return s(r)},"createTree");var qs=o(e=>e.split("?")[0].split("#")[0].replace(/(.+)(\/$)/,"$1"),"getCleanPath"),ji=o(({meta:e,hideOnMissingParameter:t}={hideOnMissingParameter:!0})=>{let r=_(),s=mt(),n=q(),{resource:i,resources:a}=G(),{pathname:u}=ye(),{useLocation:d}=ne(),{pathname:c}=d(),p=Dt(),R=`/${((n==="legacy"?qs(c):u?qs(u):void 0)??"").replace(/^\//,"")}`,g=i?Mt(i,a,n==="legacy"):R??"",T=mo.useMemo(()=>{if(!i)return[];let f=Ae(i,a),h=[Mt(i,a)];for(;f;)h.push(Mt(f,a)),f=Ae(f,a);return h},[]),E=mo.useCallback(f=>{var L,w,x,y,l,C;if((((L=f==null?void 0:f.meta)==null?void 0:L.hide)??((w=f==null?void 0:f.options)==null?void 0:w.hide))||!(f!=null&&f.list)&&f.children.length===0)return;let h=f.list?s({resource:f,action:"list",legacy:n==="legacy",meta:e}):void 0;if(!(t&&h&&h.match(/(\/|^):(.+?)(\/|$){1}/)))return{...f,route:h,icon:S((x=f.meta)==null?void 0:x.icon,(y=f.options)==null?void 0:y.icon,f.icon),label:S((l=f==null?void 0:f.meta)==null?void 0:l.label,(C=f==null?void 0:f.options)==null?void 0:C.label)??r(`${f.name}.${f.name}`,p(f.name,"plural"))}},[n,e,s,r,t]),D=mo.useMemo(()=>{let f=Zs(a,n==="legacy"),h=o(L=>L.flatMap(w=>{let x=h(w.children),y=E({...w,children:x});return y?[y]:[]}),"prepare");return h(f)},[a,n,E]);return{defaultOpenKeys:T,selectedKey:g,menuItems:D}},"useMenu");var J=o(()=>{let{params:e}=ye();return o(({resource:r,meta:s}={})=>{let{meta:n}=Ut(r)??{meta:{}},{filters:i,sorters:a,current:u,pageSize:d,...c}=e??{};return{...n,...c,...s}},"getMetaFn")},"useMeta");var Ji=o(()=>{let[e,t]=Yi(),r=_(),{push:s}=le(),n=me(),i=q(),{resource:a,action:u}=G();return Xi(()=>{a&&u&&t(r("pages.error.info",{action:u,resource:a.name},`You may have forgotten to add the "${u}" component to "${a.name}" resource.`))},[a,u]),Xt.createElement(Xt.Fragment,null,Xt.createElement("h1",null,r("pages.error.404",void 0,"Sorry, the page you visited does not exist.")),e&&Xt.createElement("p",null,e),Xt.createElement("button",{onClick:()=>{i==="legacy"?s("/"):n({to:"/"})}},r("pages.error.backHome",void 0,"Back Home")))},"ErrorComponent");import be,{useState as en}from"react";var Kr=o(()=>{let[e,t]=en(""),[r,s]=en(""),n=_(),i=Y(),{mutate:a}=Gt({v3LegacyAuthProviderCompatible:!!(i!=null&&i.isLegacy)});return be.createElement(be.Fragment,null,be.createElement("h1",null,n("pages.login.title","Sign in your account")),be.createElement("form",{onSubmit:u=>{u.preventDefault(),a({username:e,password:r})}},be.createElement("table",null,be.createElement("tbody",null,be.createElement("tr",null,be.createElement("td",null,n("pages.login.username",void 0,"username"),":"),be.createElement("td",null,be.createElement("input",{type:"text",size:20,autoCorrect:"off",spellCheck:!1,autoCapitalize:"off",autoFocus:!0,required:!0,value:e,onChange:u=>t(u.target.value)}))),be.createElement("tr",null,be.createElement("td",null,n("pages.login.password",void 0,"password"),":"),be.createElement("td",null,be.createElement("input",{type:"password",required:!0,size:20,value:r,onChange:u=>s(u.target.value)}))))),be.createElement("br",null),be.createElement("input",{type:"submit",value:"login"})))},"LoginPage");import It from"react";import ue,{useState as fo}from"react";var tn=o(({providers:e,registerLink:t,forgotPasswordLink:r,rememberMe:s,contentProps:n,wrapperProps:i,renderContent:a,formProps:u,title:d=void 0,hideForm:c})=>{let p=q(),m=ft(),{Link:R}=ne(),g=p==="legacy"?R:m,[T,E]=fo(""),[D,f]=fo(""),[h,L]=fo(!1),w=_(),x=Y(),{mutate:y}=Gt({v3LegacyAuthProviderCompatible:!!(x!=null&&x.isLegacy)}),l=o((P,M)=>ue.createElement(g,{to:P},M),"renderLink"),C=o(()=>e?e.map(P=>ue.createElement("div",{key:P.name,style:{display:"flex",alignItems:"center",justifyContent:"center",marginBottom:"1rem"}},ue.createElement("button",{onClick:()=>y({providerName:P.name}),style:{display:"flex",alignItems:"center"}},P==null?void 0:P.icon,P.label??ue.createElement("label",null,P.label)))):null,"renderProviders"),b=ue.createElement("div",{...n},ue.createElement("h1",{style:{textAlign:"center"}},w("pages.login.title","Sign in to your account")),C(),!c&&ue.createElement(ue.Fragment,null,ue.createElement("hr",null),ue.createElement("form",{onSubmit:P=>{P.preventDefault(),y({email:T,password:D,remember:h})},...u},ue.createElement("div",{style:{display:"flex",flexDirection:"column",padding:25}},ue.createElement("label",{htmlFor:"email-input"},w("pages.login.fields.email","Email")),ue.createElement("input",{id:"email-input",name:"email",type:"text",size:20,autoCorrect:"off",spellCheck:!1,autoCapitalize:"off",required:!0,value:T,onChange:P=>E(P.target.value)}),ue.createElement("label",{htmlFor:"password-input"},w("pages.login.fields.password","Password")),ue.createElement("input",{id:"password-input",type:"password",name:"password",required:!0,size:20,value:D,onChange:P=>f(P.target.value)}),s??ue.createElement(ue.Fragment,null,ue.createElement("label",{htmlFor:"remember-me-input"},w("pages.login.buttons.rememberMe","Remember me"),ue.createElement("input",{id:"remember-me-input",name:"remember",type:"checkbox",size:20,checked:h,value:h.toString(),onChange:()=>{L(!h)}}))),ue.createElement("br",null),r??l("/forgot-password",w("pages.login.buttons.forgotPassword","Forgot password?")),ue.createElement("input",{type:"submit",value:w("pages.login.signin","Sign in")}),t??ue.createElement("span",null,w("pages.login.buttons.noAccount","Don\u2019t have an account?")," ",l("/register",w("pages.login.register","Sign up")))))),t!==!1&&c&&ue.createElement("div",{style:{textAlign:"center"}},w("pages.login.buttons.noAccount","Don\u2019t have an account?")," ",l("/register",w("pages.login.register","Sign up"))));return ue.createElement("div",{...i},a?a(b,d):b)},"LoginPage");import ge,{useState as rn}from"react";var on=o(({providers:e,loginLink:t,wrapperProps:r,contentProps:s,renderContent:n,formProps:i,title:a=void 0,hideForm:u})=>{let d=q(),c=ft(),{Link:p}=ne(),m=d==="legacy"?p:c,[R,g]=rn(""),[T,E]=rn(""),D=_(),f=Y(),{mutate:h,isLoading:L}=Yr({v3LegacyAuthProviderCompatible:!!(f!=null&&f.isLegacy)}),w=o((l,C)=>ge.createElement(m,{to:l},C),"renderLink"),x=o(()=>e?e.map(l=>ge.createElement("div",{key:l.name,style:{display:"flex",alignItems:"center",justifyContent:"center",marginBottom:"1rem"}},ge.createElement("button",{onClick:()=>h({providerName:l.name}),style:{display:"flex",alignItems:"center"}},l==null?void 0:l.icon,l.label??ge.createElement("label",null,l.label)))):null,"renderProviders"),y=ge.createElement("div",{...s},ge.createElement("h1",{style:{textAlign:"center"}},D("pages.register.title","Sign up for your account")),x(),!u&&ge.createElement(ge.Fragment,null,ge.createElement("hr",null),ge.createElement("form",{onSubmit:l=>{l.preventDefault(),h({email:R,password:T})},...i},ge.createElement("div",{style:{display:"flex",flexDirection:"column",padding:25}},ge.createElement("label",{htmlFor:"email-input"},D("pages.register.fields.email","Email")),ge.createElement("input",{id:"email-input",name:"email",type:"email",size:20,autoCorrect:"off",spellCheck:!1,autoCapitalize:"off",required:!0,value:R,onChange:l=>g(l.target.value)}),ge.createElement("label",{htmlFor:"password-input"},D("pages.register.fields.password","Password")),ge.createElement("input",{id:"password-input",name:"password",type:"password",required:!0,size:20,value:T,onChange:l=>E(l.target.value)}),ge.createElement("input",{type:"submit",value:D("pages.register.buttons.submit","Sign up"),disabled:L}),t??ge.createElement(ge.Fragment,null,ge.createElement("span",null,D("pages.login.buttons.haveAccount","Have an account?")," ",w("/login",D("pages.login.signin","Sign in"))))))),t!==!1&&u&&ge.createElement("div",{style:{textAlign:"center"}},D("pages.login.buttons.haveAccount","Have an account?")," ",w("/login",D("pages.login.signin","Sign in"))));return ge.createElement("div",{...r},n?n(y,a):y)},"RegisterPage");import Ke,{useState as Zi}from"react";var sn=o(({loginLink:e,wrapperProps:t,contentProps:r,renderContent:s,formProps:n,title:i=void 0})=>{let a=_(),u=q(),d=ft(),{Link:c}=ne(),p=u==="legacy"?c:d,[m,R]=Zi(""),{mutate:g,isLoading:T}=Zr(),E=o((f,h)=>Ke.createElement(p,{to:f},h),"renderLink"),D=Ke.createElement("div",{...r},Ke.createElement("h1",{style:{textAlign:"center"}},a("pages.forgotPassword.title","Forgot your password?")),Ke.createElement("hr",null),Ke.createElement("form",{onSubmit:f=>{f.preventDefault(),g({email:m})},...n},Ke.createElement("div",{style:{display:"flex",flexDirection:"column",padding:25}},Ke.createElement("label",{htmlFor:"email-input"},a("pages.forgotPassword.fields.email","Email")),Ke.createElement("input",{id:"email-input",name:"email",type:"mail",autoCorrect:"off",spellCheck:!1,autoCapitalize:"off",required:!0,value:m,onChange:f=>R(f.target.value)}),Ke.createElement("input",{type:"submit",disabled:T,value:a("pages.forgotPassword.buttons.submit","Send reset instructions")}),Ke.createElement("br",null),e??Ke.createElement("span",null,a("pages.register.buttons.haveAccount","Have an account? ")," ",E("/login",a("pages.login.signin","Sign in"))))));return Ke.createElement("div",{...t},s?s(D,i):D)},"ForgotPasswordPage");import _e,{useState as nn}from"react";var an=o(({wrapperProps:e,contentProps:t,renderContent:r,formProps:s,title:n=void 0})=>{let i=_(),a=Y(),{mutate:u,isLoading:d}=eo({v3LegacyAuthProviderCompatible:!!(a!=null&&a.isLegacy)}),[c,p]=nn(""),[m,R]=nn(""),g=_e.createElement("div",{...t},_e.createElement("h1",{style:{textAlign:"center"}},i("pages.updatePassword.title","Update Password")),_e.createElement("hr",null),_e.createElement("form",{onSubmit:T=>{T.preventDefault(),u({password:c,confirmPassword:m})},...s},_e.createElement("div",{style:{display:"flex",flexDirection:"column",padding:25}},_e.createElement("label",{htmlFor:"password-input"},i("pages.updatePassword.fields.password","New Password")),_e.createElement("input",{id:"password-input",name:"password",type:"password",required:!0,size:20,value:c,onChange:T=>p(T.target.value)}),_e.createElement("label",{htmlFor:"confirm-password-input"},i("pages.updatePassword.fields.confirmPassword","Confirm New Password")),_e.createElement("input",{id:"confirm-password-input",name:"confirmPassword",type:"password",required:!0,size:20,value:m,onChange:T=>R(T.target.value)}),_e.createElement("input",{type:"submit",disabled:d,value:i("pages.updatePassword.buttons.submit","Update")}))));return _e.createElement("div",{...e},r?r(g,n):g)},"UpdatePasswordPage");var qi=o(e=>{let{type:t}=e;return It.createElement(It.Fragment,null,o(()=>{switch(t){case"register":return It.createElement(on,{...e});case"forgotPassword":return It.createElement(sn,{...e});case"updatePassword":return It.createElement(an,{...e});default:return It.createElement(tn,{...e})}},"renderView")())},"AuthPage");import we from"react";var yo=o(()=>we.createElement(we.Fragment,null,we.createElement("h1",null,"Welcome on board"),we.createElement("p",null,"Your configuration is completed."),we.createElement("p",null,"Now you can get started by adding your resources to the"," ",we.createElement("code",null,"`resources`")," property of ",we.createElement("code",null,"`<Refine>`")),we.createElement("div",{style:{display:"flex",gap:8}},we.createElement("a",{href:"https://refine.dev",target:"_blank",rel:"noreferrer"},we.createElement("button",null,"Documentation")),we.createElement("a",{href:"https://refine.dev/examples",target:"_blank",rel:"noreferrer"},we.createElement("button",null,"Examples")),we.createElement("a",{href:"https://discord.gg/refine",target:"_blank",rel:"noreferrer"},we.createElement("button",null,"Community")))),"ReadyPage");import Te,{useState as eu}from"react";var tu=[{title:"Documentation",description:"Learn about the technical details of using refine in your projects.",link:"https://refine.dev/",iconUrl:"https://refine.ams3.cdn.digitaloceanspaces.com/welcome-page/book.svg"},{title:"Tutorial",description:"Learn how to use refine by building a fully-functioning CRUD app, from scratch to full launch.",link:"https://refine.dev/docs/tutorial/introduction/index/",iconUrl:"https://refine.ams3.cdn.digitaloceanspaces.com/welcome-page/hat.svg"},{title:"Examples",description:"A collection of reference applications you can use as a starting point.",link:"https://refine.dev/examples",iconUrl:"https://refine.ams3.cdn.digitaloceanspaces.com/welcome-page/application.svg"},{title:"Community",description:"Join our Discord community and keep up with the latest news.",link:"https://discord.gg/refine",iconUrl:"https://refine.ams3.cdn.digitaloceanspaces.com/welcome-page/discord.svg"}],ru=o(()=>{let e=gr("(max-width: 1010px)"),t=gr("(max-width: 650px)"),r=o(()=>t?"1, 280px":e?"2, 280px":"4, 1fr","getGridTemplateColumns"),s=o(()=>t?"32px":e?"40px":"48px","getHeaderFontSize"),n=o(()=>t?"16px":e?"20px":"24px","getSubHeaderFontSize");return Te.createElement("div",{style:{position:"fixed",zIndex:10,inset:0,overflow:"auto",width:"100dvw",height:"100dvh"}},Te.createElement("div",{style:{overflow:"hidden",position:"relative",backgroundSize:"cover",backgroundRepeat:"no-repeat",background:t?"url(https://refine.ams3.cdn.digitaloceanspaces.com/website/static/assets/landing-noise.webp), radial-gradient(88.89% 50% at 50% 100%, rgba(38, 217, 127, 0.10) 0%, rgba(38, 217, 127, 0.00) 100%), radial-gradient(88.89% 50% at 50% 0%, rgba(71, 235, 235, 0.15) 0%, rgba(71, 235, 235, 0.00) 100%), #1D1E30":e?"url(https://refine.ams3.cdn.digitaloceanspaces.com/website/static/assets/landing-noise.webp), radial-gradient(66.67% 50% at 50% 100%, rgba(38, 217, 127, 0.10) 0%, rgba(38, 217, 127, 0.00) 100%), radial-gradient(66.67% 50% at 50% 0%, rgba(71, 235, 235, 0.15) 0%, rgba(71, 235, 235, 0.00) 100%), #1D1E30":"url(https://refine.ams3.cdn.digitaloceanspaces.com/website/static/assets/landing-noise.webp), radial-gradient(35.56% 50% at 50% 100%, rgba(38, 217, 127, 0.12) 0%, rgba(38, 217, 127, 0) 100%), radial-gradient(35.56% 50% at 50% 0%, rgba(71, 235, 235, 0.18) 0%, rgba(71, 235, 235, 0) 100%), #1D1E30",minHeight:"100%",minWidth:"100%",fontFamily:"Arial",color:"#FFFFFF"}},Te.createElement("div",{style:{zIndex:2,position:"absolute",width:t?"400px":"800px",height:"552px",opacity:"0.5",background:"url(https://refine.ams3.cdn.digitaloceanspaces.com/assets/welcome-page-hexagon.png)",backgroundRepeat:"no-repeat",backgroundSize:"contain",top:"0",left:"50%",transform:"translateX(-50%)"}}),Te.createElement("div",{style:{height:t?"40px":"80px"}}),Te.createElement("div",{style:{display:"flex",justifyContent:"center"}},Te.createElement("div",{style:{backgroundRepeat:"no-repeat",backgroundSize:t?"112px 58px":"224px 116px",backgroundImage:"url(https://refine.ams3.cdn.digitaloceanspaces.com/assets/refine-logo.svg)",width:t?112:224,height:t?58:116}})),Te.createElement("div",{style:{height:t?"120px":e?"270px":"40vh",minHeight:t?"120px":"270px"}}),Te.createElement("div",{style:{display:"flex",flexDirection:"column",gap:"16px",textAlign:"center"}},Te.createElement("h1",{style:{fontSize:s(),fontWeight:700,margin:"0px"}},"Welcome Aboard!"),Te.createElement("h4",{style:{fontSize:n(),fontWeight:400,margin:"0px"}},"Your configuration is completed.")),Te.createElement("div",{style:{height:"64px"}}),Te.createElement("div",{style:{display:"grid",gridTemplateColumns:`repeat(${r()})`,justifyContent:"center",gap:"48px",paddingRight:"16px",paddingLeft:"16px",paddingBottom:"32px",maxWidth:"976px",margin:"auto"}},tu.map(i=>Te.createElement(ou,{key:`welcome-page-${i.title}`,card:i})))))},"WelcomePage"),ou=o(({card:e})=>{let{title:t,description:r,iconUrl:s,link:n}=e,[i,a]=eu(!1);return Te.createElement("div",{style:{display:"flex",flexDirection:"column",gap:"16px"}},Te.createElement("div",{style:{display:"flex",alignItems:"center"}},Te.createElement("a",{onPointerEnter:()=>a(!0),onPointerLeave:()=>a(!1),style:{display:"flex",alignItems:"center",color:"#fff",textDecoration:"none"},href:n},Te.createElement("div",{style:{width:"16px",height:"16px",backgroundPosition:"center",backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundImage:`url(${s})`}}),Te.createElement("span",{style:{fontSize:"16px",fontWeight:700,marginLeft:"13px",marginRight:"14px"}},t),Te.createElement("svg",{style:{transition:"transform 0.5s ease-in-out, opacity 0.2s ease-in-out",...i&&{transform:"translateX(4px)",opacity:1}},width:"12",height:"8",fill:"none",opacity:"0.5",xmlns:"http://www.w3.org/2000/svg"},Te.createElement("path",{d:"M7.293.293a1 1 0 0 1 1.414 0l3 3a1 1 0 0 1 0 1.414l-3 3a1 1 0 0 1-1.414-1.414L8.586 5H1a1 1 0 0 1 0-2h7.586L7.293 1.707a1 1 0 0 1 0-1.414Z",fill:"#fff"})))),Te.createElement("span",{style:{fontSize:"12px",opacity:.5,lineHeight:"16px"}},r))},"Card");import ce from"react";import{QueryClient as fn,QueryClientProvider as cu}from"@tanstack/react-query";import{useQuerySubscription as du}from"@refinedev/devtools-internal";import cn from"react";import{useContext as gt}from"react";var su="4.46.2",un=o(()=>{var h;let e=to(),t=gt(yt),r=gt(qe),s=gt(jt),n=gt(_t),{i18nProvider:i}=gt(Ne),a=gt(Ot),u=gt(ut),{resources:d}=G(),c=oe(),p=!!t.create||!!t.get||!!t.update,m=!!(r!=null&&r.publish)||!!(r!=null&&r.subscribe)||!!(r!=null&&r.unsubscribe),R=!!s.useHistory||!!s.Link||!!s.Prompt||!!s.useLocation||!!s.useParams,g=!!n,T=!!(i!=null&&i.changeLocale)||!!(i!=null&&i.getLocale)||!!(i!=null&&i.translate),E=!!a.close||!!a.open,D=!!u.can,f=(h=c==null?void 0:c.options)==null?void 0:h.projectId;return{providers:{auth:e,auditLog:p,live:m,router:R,data:g,i18n:T,notification:E,accessControl:D},version:su,resourceCount:d.length,projectId:f}},"useTelemetryData");var nu=o(e=>{try{let t=JSON.stringify(e||{});return typeof btoa<"u"?btoa(t):Buffer.from(t).toString("base64")}catch{return}},"encode"),au=o(e=>{let t=new Image;t.src=e},"throughImage"),iu=o(e=>{fetch(e)},"throughFetch"),uu=o(e=>{typeof Image<"u"?au(e):typeof fetch<"u"&&iu(e)},"transport"),dn=o(()=>{let e=un(),t=cn.useRef(!1);return cn.useEffect(()=>{if(t.current)return;let r=nu(e);r&&(uu(`https://telemetry.refine.dev/telemetry?payload=${r}`),t.current=!0)},[]),null},"Telemetry");var pn=o(e=>{let t=["go","parse","back","Link"],r=Object.keys(e).filter(n=>!t.includes(n));return r.length>0?(console.warn(`Unsupported properties are found in \`routerProvider\` prop. You provided \`${r.join(", ")}\`. Supported properties are \`${t.join(", ")}\`. You may wanted to use \`legacyRouterProvider\` prop instead.`),!0):!1},"checkRouterPropMisuse");import ln from"react";var mn=o(e=>{let t=ln.useRef(!1);ln.useEffect(()=>{t.current===!1&&e&&pn(e)&&(t.current=!0)},[e])},"useRouterMisuseWarning");var pu=o(({legacyAuthProvider:e,authProvider:t,dataProvider:r,legacyRouterProvider:s,routerProvider:n,notificationProvider:i,accessControlProvider:a,auditLogProvider:u,resources:d,DashboardPage:c,ReadyPage:p,LoginPage:m,catchAll:R,children:g,liveProvider:T,i18nProvider:E,Title:D,Layout:f,Sider:h,Header:L,Footer:w,OffLayoutArea:x,onLiveEvent:y,options:l})=>{let{optionsWithDefaults:C,disableTelemetryWithDefault:b,reactQueryWithDefaults:P}=Hr({options:l}),M=Ur(()=>{var I;return P.clientConfig instanceof fn?P.clientConfig:new fn({...P.clientConfig,defaultOptions:{...P.clientConfig.defaultOptions,queries:{refetchOnWindowFocus:!1,keepPreviousData:!0,...(I=P.clientConfig.defaultOptions)==null?void 0:I.queries}}})},[P.clientConfig]);du(M);let U=ce.useMemo(()=>typeof i=="function"?i:()=>i??{},[i])();if(mn(n),s&&!n&&(d??[]).length===0)return p?ce.createElement(p,null):ce.createElement(yo,null);let{RouterComponent:k=ce.Fragment}=n?{}:s??{};return ce.createElement(cu,{client:M},ce.createElement(ws,{...U},ce.createElement(Vo,{...e??{},isProvided:!!e},ce.createElement(No,{...t??{},isProvided:!!t},ce.createElement(Ts,{...r},ce.createElement(Ps,{liveProvider:T},ce.createElement(Ds,{value:s&&!n?"legacy":"new"},ce.createElement(Es,{router:n},ce.createElement(Vs,{...s},ce.createElement(Cs,{resources:d??[]},ce.createElement(As,{i18nProvider:E},ce.createElement(Ns,{...a??{}},ce.createElement(js,{...u??{}},ce.createElement(no,null,ce.createElement(Ao,{mutationMode:C.mutationMode,warnWhenUnsavedChanges:C.warnWhenUnsavedChanges,syncWithLocation:C.syncWithLocation,Title:D,undoableTimeout:C.undoableTimeout,catchAll:R,DashboardPage:c,LoginPage:m,Layout:f,Sider:h,Footer:w,Header:L,OffLayoutArea:x,hasDashboard:!!c,liveMode:C.liveMode,onLiveEvent:y,options:C},ce.createElement(Go,null,ce.createElement(k,null,g,!b&&ce.createElement(dn,null),ce.createElement(go,null))))))))))))))))))},"Refine");import{useEffect as lu,useState as mu}from"react";var ys=o(({notification:e})=>{let t=_(),{notificationDispatch:r}=Xe(),{open:s}=Ie(),[n,i]=mu(),a=o(()=>{if(e.isRunning===!0&&(e.seconds===0&&e.doMutation(),e.isSilent||s==null||s({key:`${e.id}-${e.resource}-notification`,type:"progress",message:t("notifications.undoable",{seconds:Vt(e.seconds)},`You have ${Vt(e.seconds)} seconds to undo`),cancelMutation:e.cancelMutation,undoableTimeout:Vt(e.seconds)}),e.seconds>0)){n&&clearTimeout(n);let u=setTimeout(()=>{r({type:"DECREASE_NOTIFICATION_SECOND",payload:{id:e.id,seconds:e.seconds,resource:e.resource}})},1e3);i(u)}},"cancelNotification");return lu(()=>{a()},[e]),null},"UndoableQueue");import To,{useEffect as fu}from"react";var yu=o(({children:e,Layout:t,Sider:r,Header:s,Title:n,Footer:i,OffLayoutArea:a})=>{let{Layout:u,Footer:d,Header:c,Sider:p,Title:m,OffLayoutArea:R}=oe();return To.createElement(t??u,{Sider:r??p,Header:s??c,Footer:i??d,Title:n??m,OffLayoutArea:a??R},e,To.createElement(gu,null))},"LayoutWrapper"),gu=o(()=>{let{Prompt:e}=ne(),t=_(),{warnWhen:r,setWarnWhen:s}=Ht(),n=o(i=>(i.preventDefault(),i.returnValue=t("warnWhenUnsavedChanges","Are you sure you want to leave? You have unsaved changes."),i.returnValue),"warnWhenListener");return fu(()=>(r&&window.addEventListener("beforeunload",n),window.removeEventListener("beforeunload",n)),[r]),To.createElement(e,{when:r,message:t("warnWhenUnsavedChanges","Are you sure you want to leave? You have unsaved changes."),setWarnWhen:s})},"UnsavedPrompt");import He from"react";function Tu({redirectOnFail:e=!0,appendCurrentPathToQuery:t=!0,children:r,fallback:s,loading:n}){var L;let i=Y(),a=q(),u=!!(i!=null&&i.isProvided),d=!!(i!=null&&i.isLegacy),c=a==="legacy",p=ye(),m=me(),{useLocation:R}=ne(),g=R(),{isFetching:T,isSuccess:E,data:{authenticated:D,redirectTo:f}={}}=Dr({v3LegacyAuthProviderCompatible:d}),h=u?d?E:D:!0;if(!u)return He.createElement(He.Fragment,null,r??null);if(T)return He.createElement(He.Fragment,null,n??null);if(h)return He.createElement(He.Fragment,null,r??null);{if(typeof s<"u")return He.createElement(He.Fragment,null,s??null);let w=d?typeof e=="string"?e:"/login":typeof e=="string"?e:f,x=`${c?g==null?void 0:g.pathname:p.pathname}`.replace(/(\?.*|#.*)$/,"");if(w)if(c){let y=t?`?to=${encodeURIComponent(x)}`:"";return He.createElement(Pu,{to:`${w}${y}`})}else return He.createElement(Ru,{config:{to:w,query:t?{to:(L=p.params)!=null&&L.to?p.params.to:m({to:x,options:{keepQuery:!0},type:"path"})}:void 0,type:"replace"}});return null}}o(Tu,"Authenticated");var Ru=o(({config:e})=>{let t=me();return He.useEffect(()=>{t(e)},[t,e]),null},"Redirect"),Pu=o(({to:e})=>{let{replace:t}=le();return He.useEffect(()=>{t(e)},[t,e]),null},"RedirectLegacy");import{useEffect as xu}from"react";var go=o(()=>{let{useLocation:e}=ne(),{checkAuth:t}=se(),r=e();return xu(()=>{t==null||t().catch(()=>!1)},[r==null?void 0:r.pathname]),null},"RouteChangeHandler");import wt,{useEffect as hu}from"react";var Cu=o(({resource:e,action:t,params:r,fallback:s,onUnauthorized:n,children:i,...a})=>{let{resource:u,id:d,action:c}=G(e),{identifier:p}=G(),R=o(()=>{let f=(r==null?void 0:r.id)??d;return e&&e!==p?r==null?void 0:r.id:f},"getDefaultId")(),g=e??(u==null?void 0:u.name),T=t??c??"",E=r??{id:R,resource:u},{data:D}=Ks({resource:g,action:T,params:E});return hu(()=>{n&&(D==null?void 0:D.can)===!1&&n({resource:g,action:T,reason:D==null?void 0:D.reason,params:E})},[D==null?void 0:D.can]),D!=null&&D.can?wt.isValidElement(i)?wt.cloneElement(i,a):wt.createElement(wt.Fragment,null,i):(D==null?void 0:D.can)===!1?wt.createElement(wt.Fragment,null,s??null):null},"CanAccess");import te,{useEffect as bu}from"react";var yn=[`
    .bg-top-announcement {
        border-bottom: 1px solid rgba(71, 235, 235, 0.15);
        background: radial-gradient(
                218.19% 111.8% at 0% 0%,
                rgba(71, 235, 235, 0.1) 0%,
                rgba(71, 235, 235, 0.2) 100%
            ),
            #14141f;
    }
    `,`
    .top-announcement-mask {
        mask-image: url(https://refine.ams3.cdn.digitaloceanspaces.com/website/static/assets/hexagon.svg);
        -webkit-mask-image: url(https://refine.ams3.cdn.digitaloceanspaces.com/website/static/assets/hexagon.svg);
        mask-repeat: repeat;
        -webkit-mask-repeat: repeat;
        background: rgba(71, 235, 235, 0.25);
    }
    `,`
    .banner {
        display: flex;
        @media (max-width: 1000px) {
            display: none;
        }
    }`,`
    .gh-link, .gh-link:hover, .gh-link:active, .gh-link:visited, .gh-link:focus {
        text-decoration: none;
        z-index: 9;
    }
    `,`
    @keyframes top-announcement-glow {
        0% {
            opacity: 1;
        }

        100% {
            opacity: 0;
        }
    }
    `];var vu="If you find Refine useful, you can contribute to its growth by giving it a star on GitHub",Du=o(()=>(bu(()=>{let e=document.createElement("style");document.head.appendChild(e),yn.forEach(t=>{var r;return(r=e.sheet)==null?void 0:r.insertRule(t,e.sheet.cssRules.length)})},[]),te.createElement("div",{className:"banner bg-top-announcement",style:{width:"100%",height:"48px"}},te.createElement("div",{style:{position:"relative",display:"flex",justifyContent:"center",alignItems:"center",paddingLeft:"200px",width:"100%",maxWidth:"100vw",height:"100%",borderBottom:"1px solid #47ebeb26"}},te.createElement("div",{className:"top-announcement-mask",style:{position:"absolute",left:0,top:0,width:"100%",height:"100%",borderBottom:"1px solid #47ebeb26"}},te.createElement("div",{style:{position:"relative",width:"960px",height:"100%",display:"flex",justifyContent:"space-between",margin:"0 auto"}},te.createElement("div",{style:{width:"calc(50% - 300px)",height:"100%",position:"relative"}},te.createElement(Ar,{style:{animationDelay:"1.5s",position:"absolute",top:"2px",right:"220px"},id:"1"}),te.createElement(Ar,{style:{animationDelay:"1s",position:"absolute",top:"8px",right:"100px",transform:"rotate(180deg)"},id:"2"}),te.createElement(gn,{style:{position:"absolute",right:"10px"},id:"3"})),te.createElement("div",{style:{width:"calc(50% - 300px)",height:"100%",position:"relative"}},te.createElement(Ar,{style:{animationDelay:"2s",position:"absolute",top:"6px",right:"180px",transform:"rotate(180deg)"},id:"4"}),te.createElement(Ar,{style:{animationDelay:"0.5s",transitionDelay:"1.3s",position:"absolute",top:"2px",right:"40px"},id:"5"}),te.createElement(gn,{style:{position:"absolute",right:"-70px"},id:"6"})))),te.createElement(Lu,{text:vu})))),"GitHubBanner"),Lu=o(({text:e})=>te.createElement("a",{className:"gh-link",href:"https://s.refine.dev/github-support",target:"_blank",rel:"noreferrer",style:{position:"absolute",height:"100%",padding:"0 60px",display:"flex",flexWrap:"nowrap",whiteSpace:"nowrap",justifyContent:"center",alignItems:"center",backgroundImage:"linear-gradient(90deg, rgba(31, 63, 72, 0.00) 0%, #1F3F48 10%, #1F3F48 90%, rgba(31, 63, 72, 0.00) 100%)"}},te.createElement("div",{style:{color:"#fff",display:"flex",flexDirection:"row",gap:"8px"}},te.createElement("span",{style:{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center"}},"\u2B50\uFE0F"),te.createElement("span",{className:"text",style:{fontSize:"16px",lineHeight:"24px"}},e),te.createElement("span",{style:{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center"}},"\u2B50\uFE0F"))),"Text"),Ar=o(({style:e,...t})=>te.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:80,height:40,fill:"none",style:{opacity:1,animation:"top-announcement-glow 1s ease-in-out infinite alternate",...e}},te.createElement("circle",{cx:40,r:40,fill:`url(#${t.id}-a)`,fillOpacity:.5}),te.createElement("defs",null,te.createElement("radialGradient",{id:`${t.id}-a`,cx:0,cy:0,r:1,gradientTransform:"matrix(0 40 -40 0 40 0)",gradientUnits:"userSpaceOnUse"},te.createElement("stop",{stopColor:"#47EBEB"}),te.createElement("stop",{offset:1,stopColor:"#47EBEB",stopOpacity:0})))),"GlowSmall"),gn=o(({style:e,...t})=>te.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:120,height:48,fill:"none",...t,style:{opacity:1,animation:"top-announcement-glow 1s ease-in-out infinite alternate",...e}},te.createElement("circle",{cx:60,cy:24,r:60,fill:`url(#${t.id}-a)`,fillOpacity:.5}),te.createElement("defs",null,te.createElement("radialGradient",{id:`${t.id}-a`,cx:0,cy:0,r:1,gradientTransform:"matrix(0 60 -60 0 60 24)",gradientUnits:"userSpaceOnUse"},te.createElement("stop",{stopColor:"#47EBEB"}),te.createElement("stop",{offset:1,stopColor:"#47EBEB",stopOpacity:0})))),"GlowBig");import ke from"react";var Eu=o(({status:e,elements:{success:t=ke.createElement(kr,{key:"autoSave.success",defaultMessage:"saved"}),error:r=ke.createElement(kr,{key:"autoSave.error",defaultMessage:"auto save failure"}),loading:s=ke.createElement(kr,{key:"autoSave.loading",defaultMessage:"saving..."}),idle:n=ke.createElement(kr,{key:"autoSave.idle",defaultMessage:"waiting for changes"})}={}})=>{switch(e){case"success":return ke.createElement(ke.Fragment,null,t);case"error":return ke.createElement(ke.Fragment,null,r);case"loading":return ke.createElement(ke.Fragment,null,s);default:return ke.createElement(ke.Fragment,null,n)}},"AutoSaveIndicator"),kr=o(({key:e,defaultMessage:t})=>{let r=_();return ke.createElement("span",null,r(e,t))},"Message");export{ut as AccessControlContext,qi as AuthPage,Tu as Authenticated,Eu as AutoSaveIndicator,Cu as CanAccess,Ji as ErrorComponent,Du as GitHubBanner,Ct as KeyBuilder,yu as LayoutWrapper,Kr as LoginPage,yo as ReadyPage,pu as Refine,it as ResourceContext,go as RouteChangeHandler,Ne as TranslationContext,ys as UndoableQueue,ru as WelcomePage,Io as createTreeView,Qn as file2Base64,Rr as flattenObjectKeys,Ko as generateDefaultDocumentTitle,Fn as getDefaultFilter,kn as getDefaultSortOrder,mr as getNextPageParam,fr as getPreviousPageParam,bo as handleUseParams,er as importCSVMapper,We as keys,yr as legacyResourceTransform,Mo as matchResourceFromRoute,Pr as parseTableParams,An as parseTableParamsFromQuery,z as pickDataProvider,S as pickNotDeprecated,zo as propertyPathToArray,vo as queryKeys,pr as routeGenerator,Cr as setInitialFilters,br as setInitialSorters,xr as stringifyTableParams,Lt as unionFilters,hr as unionSorters,Y as useActiveAuthProvider,xa as useApiUrl,$n as useAuthenticated,co as useBack,xb as useBreadcrumb,Ks as useCan,nC as useCanWithoutCache,Xe as useCancelNotification,Wn as useCheckError,zt as useCreate,ao as useCreateMany,ba as useCustom,La as useCustomMutation,re as useDataProvider,ca as useDelete,Pa as useDeleteMany,qP as useExport,Zr as useForgotPassword,fx as useForm,_r as useGetIdentity,ci as useGetLocale,mt as useGetToPath,me as useGo,ie as useHandleNotification,lh as useImport,Sa as useInfiniteList,Ce as useInvalidate,Dr as useIsAuthenticated,to as useIsExistAuthentication,ft as useLink,$t as useList,Is as useLiveMode,ee as useLoadingOvertime,Be as useLog,ab as useLogList,Gt as useLogin,vr as useLogout,ro as useMany,ji as useMenu,J as useMeta,gh as useModal,ze as useMutationMode,le as useNavigation,Ie as useNotification,ae as useOnError,Wt as useOne,io as useParse,ye as useParsed,Vn as usePermissions,Ve as usePublish,ks as useRedirectionAfterSubmission,oe as useRefineContext,Yr as useRegister,G as useResource,at as useResourceSubscription,Us as useResourceWithRoute,ne as useRouterContext,q as useRouterType,RC as useSelect,si as useSetLocale,oh as useShow,iP as useSubscription,Wr as useSyncWithLocation,AC as useTable,Mn as useTitle,Mi as useToPath,_ as useTranslate,Er as useUpdate,ya as useUpdateMany,eo as useUpdatePassword,Dt as useUserFriendlyName,Ht as useWarnAboutChange,tr as userFriendlyResourceName};
//# sourceMappingURL=index.js.map